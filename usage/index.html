
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="csvtk - CSV/TSV toolkit">
      
      
        <meta name="author" content="shenwei356">
      
      
      
        <link rel="prev" href="../download/">
      
      
        <link rel="next" href="../faq/">
      
      
      <link rel="icon" href="../files/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Usage - csvtk - CSV/TSV Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage-and-examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="csvtk - CSV/TSV Toolkit" class="md-header__button md-logo" aria-label="csvtk - CSV/TSV Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            csvtk - CSV/TSV Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/shenwei356/csvtk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="csvtk - CSV/TSV Toolkit" class="md-nav__button md-logo" aria-label="csvtk - CSV/TSV Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    csvtk - CSV/TSV Toolkit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/shenwei356/csvtk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../download/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Download
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Usage
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-use" class="md-nav__link">
    Before use
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csvtk" class="md-nav__link">
    csvtk
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headers" class="md-nav__link">
    headers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dimnrowncol" class="md-nav__link">
    dim/nrow/ncol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#watch" class="md-nav__link">
    watch
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corr" class="md-nav__link">
    corr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pretty" class="md-nav__link">
    pretty
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transpose" class="md-nav__link">
    transpose
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2json" class="md-nav__link">
    csv2json
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#space2tab" class="md-nav__link">
    space2tab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2md" class="md-nav__link">
    csv2md
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2rst" class="md-nav__link">
    csv2rst
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2xlsx" class="md-nav__link">
    csv2xlsx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xlsx2csv" class="md-nav__link">
    xlsx2csv
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#head" class="md-nav__link">
    head
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concat" class="md-nav__link">
    concat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample" class="md-nav__link">
    sample
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cut" class="md-nav__link">
    cut
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uniq" class="md-nav__link">
    uniq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#freq" class="md-nav__link">
    freq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inter" class="md-nav__link">
    inter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grep" class="md-nav__link">
    grep
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter" class="md-nav__link">
    filter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter2" class="md-nav__link">
    filter2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    join
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#split" class="md-nav__link">
    split
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#splitxlsx" class="md-nav__link">
    splitxlsx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comb" class="md-nav__link">
    comb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fix" class="md-nav__link">
    fix
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fix-quotes" class="md-nav__link">
    fix-quotes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#del-quotes" class="md-nav__link">
    del-quotes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-header" class="md-nav__link">
    add-header
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#del-header" class="md-nav__link">
    del-header
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rename" class="md-nav__link">
    rename
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rename2" class="md-nav__link">
    rename2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replace" class="md-nav__link">
    replace
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#round" class="md-nav__link">
    round
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comma" class="md-nav__link">
    comma
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutate" class="md-nav__link">
    mutate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutate2" class="md-nav__link">
    mutate2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutate3" class="md-nav__link">
    mutate3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sep" class="md-nav__link">
    sep
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gather" class="md-nav__link">
    gather
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spread" class="md-nav__link">
    spread
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unfold" class="md-nav__link">
    unfold
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fold" class="md-nav__link">
    fold
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fmtdate" class="md-nav__link">
    fmtdate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sort" class="md-nav__link">
    sort
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot" class="md-nav__link">
    plot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-hist" class="md-nav__link">
    plot hist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-box" class="md-nav__link">
    plot box
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-line" class="md-nav__link">
    plot line
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cat" class="md-nav__link">
    cat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genautocomplete" class="md-nav__link">
    genautocomplete
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../chinese/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中文介绍
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/shenwei356" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    More tools
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-use" class="md-nav__link">
    Before use
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csvtk" class="md-nav__link">
    csvtk
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#headers" class="md-nav__link">
    headers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dimnrowncol" class="md-nav__link">
    dim/nrow/ncol
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#watch" class="md-nav__link">
    watch
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corr" class="md-nav__link">
    corr
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pretty" class="md-nav__link">
    pretty
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transpose" class="md-nav__link">
    transpose
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2json" class="md-nav__link">
    csv2json
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#space2tab" class="md-nav__link">
    space2tab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2md" class="md-nav__link">
    csv2md
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2rst" class="md-nav__link">
    csv2rst
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#csv2xlsx" class="md-nav__link">
    csv2xlsx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#xlsx2csv" class="md-nav__link">
    xlsx2csv
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#head" class="md-nav__link">
    head
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concat" class="md-nav__link">
    concat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample" class="md-nav__link">
    sample
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cut" class="md-nav__link">
    cut
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uniq" class="md-nav__link">
    uniq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#freq" class="md-nav__link">
    freq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inter" class="md-nav__link">
    inter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grep" class="md-nav__link">
    grep
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter" class="md-nav__link">
    filter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filter2" class="md-nav__link">
    filter2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#join" class="md-nav__link">
    join
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#split" class="md-nav__link">
    split
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#splitxlsx" class="md-nav__link">
    splitxlsx
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comb" class="md-nav__link">
    comb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fix" class="md-nav__link">
    fix
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fix-quotes" class="md-nav__link">
    fix-quotes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#del-quotes" class="md-nav__link">
    del-quotes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-header" class="md-nav__link">
    add-header
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#del-header" class="md-nav__link">
    del-header
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rename" class="md-nav__link">
    rename
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rename2" class="md-nav__link">
    rename2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replace" class="md-nav__link">
    replace
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#round" class="md-nav__link">
    round
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comma" class="md-nav__link">
    comma
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutate" class="md-nav__link">
    mutate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutate2" class="md-nav__link">
    mutate2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutate3" class="md-nav__link">
    mutate3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sep" class="md-nav__link">
    sep
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gather" class="md-nav__link">
    gather
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spread" class="md-nav__link">
    spread
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unfold" class="md-nav__link">
    unfold
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fold" class="md-nav__link">
    fold
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fmtdate" class="md-nav__link">
    fmtdate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sort" class="md-nav__link">
    sort
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot" class="md-nav__link">
    plot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-hist" class="md-nav__link">
    plot hist
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-box" class="md-nav__link">
    plot box
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plot-line" class="md-nav__link">
    plot line
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cat" class="md-nav__link">
    cat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#genautocomplete" class="md-nav__link">
    genautocomplete
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="usage-and-examples">Usage and Examples</h1>
<h2 id="before-use">Before use</h2>
<p><strong>Attention</strong></p>
<ol>
<li>By default, csvtk assumes input files have header row, if not, switch flag <code>-H</code> on.</li>
<li>By default, csvtk handles CSV files, use flag <code>-t</code> for tab-delimited files.</li>
<li>Column names should be unique.</li>
<li>By default, lines starting with <code>#</code> will be ignored, if the header row
    starts with <code>#</code>, please assign flag <code>-C</code> another rare symbol, e.g. <code>$</code>.</li>
<li>Do not mix use field (column) numbers and names to specify columns to operate.</li>
<li>The CSV parser requires all the lines have same numbers of fields/columns.
    Even lines with spaces will cause error.
    Use <code>-I/--ignore-illegal-row</code> to skip these lines if neccessary.
    You can also use "csvtk fix" to fix files with different numbers of columns in rows.</li>
<li>
<p>If double-quotes exist in fields not enclosed with double-quotes, e.g.,</p>
<pre><code>x,a "b" c,1
</code></pre>
<p>It would report error:</p>
<pre><code>bare `"` in non-quoted-field.
</code></pre>
<p>Please switch on the flag <code>-l</code> or use <code>csvtk fix-quotes</code> to fix it.</p>
</li>
<li>
<p>If somes fields have only a double-quote eighter in the beginning or in the end, e.g.,</p>
<pre><code>x,d "e","a" b c,1
</code></pre>
<p>It would report error:</p>
<pre><code>extraneous or missing " in quoted-field
</code></pre>
<p>Please use <code>csvtk fix-quotes</code> to fix it, and use <code>csvtk del-quotes</code> to reset to the
original format as needed.</p>
</li>
</ol>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#csvtk">csvtk</a></li>
</ul>
<p><strong>Information</strong></p>
<ul>
<li><a href="#headers">headers</a></li>
<li><a href="#dim/nrow/ncol">dim/nrow/ncol</a></li>
<li><a href="#summary">summary</a></li>
<li><a href="#corr">corr</a></li>
<li><a href="#watch">watch</a></li>
</ul>
<p><strong>Format conversion</strong></p>
<ul>
<li><a href="#pretty">pretty</a></li>
<li><a href="#space2tab">space2tab</a></li>
<li><a href="#csv2md">csv2md</a></li>
<li><a href="#csv2json">csv2json</a></li>
<li><a href="#csv2xlsx">csv2xlsx</a></li>
<li><a href="#xlsx2csv">xlsx2csv</a></li>
</ul>
<p><strong>Set operations</strong></p>
<ul>
<li><a href="#head">head</a></li>
<li><a href="#concat">concat</a></li>
<li><a href="#sample">sample</a></li>
<li><a href="#cut">cut</a></li>
<li><a href="#grep">grep</a></li>
<li><a href="#uniq">uniq</a></li>
<li><a href="#freq">freq</a></li>
<li><a href="#inter">inter</a></li>
<li><a href="#filter">filter</a></li>
<li><a href="#filter2">filter2</a></li>
<li><a href="#join">join</a></li>
<li><a href="#split">split</a></li>
<li><a href="#splitxlsx">splitxlsx</a></li>
<li><a href="#comb">comb</a></li>
</ul>
<p><strong>Edit</strong></p>
<ul>
<li><a href="#fix">fix</a></li>
<li><a href="#fix-quotes">fix-quotes</a></li>
<li><a href="#del-quotes">del-quotes</a></li>
<li><a href="#add-header">add-header</a></li>
<li><a href="#del-header">del-header</a></li>
<li><a href="#rename">rename</a></li>
<li><a href="#rename2">rename2</a></li>
<li><a href="#replace">replace</a></li>
<li><a href="#round">round</a></li>
<li><a href="#comma">comma</a></li>
<li><a href="#mutate">mutate</a></li>
<li><a href="#mutate2">mutate2</a></li>
<li><a href="#mutate3">mutate3</a></li>
</ul>
<p><strong>Transform</strong></p>
<ul>
<li><a href="#transpose">transpose</a></li>
<li><a href="#sep">sep</a></li>
<li><a href="#gather">gather</a></li>
<li><a href="#spread">spread</a></li>
<li><a href="#unfold">unfold</a></li>
<li><a href="#fold">fold</a></li>
</ul>
<p><strong>Ordering</strong></p>
<ul>
<li><a href="#sort">sort</a></li>
</ul>
<p><strong>Ploting</strong></p>
<ul>
<li><a href="#plot">plot</a></li>
<li><a href="#plot-hist">plot hist</a></li>
<li><a href="#plot-box">plot box</a></li>
<li><a href="#plot-line">plot line</a></li>
</ul>
<p><strong>Misc</strong></p>
<ul>
<li><a href="#cat">cat</a></li>
<li><a href="#genautocomplete">genautocomplete</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h2 id="csvtk">csvtk</h2>
<p>Usage</p>
<pre><code class="language-text">csvtk -- a cross-platform, efficient and practical CSV/TSV toolkit

Version: 0.33.0

Author: Wei Shen &lt;shenwei356@gmail.com&gt;

Documents  : http://shenwei356.github.io/csvtk
Source code: https://github.com/shenwei356/csvtk

Attention:

  1. By default, csvtk assumes input files have header row, if not, switch flag &quot;-H&quot; on.
  2. By default, csvtk handles CSV files, use flag &quot;-t&quot; for tab-delimited files.
  3. Column names should be unique.
  4. By default, lines starting with &quot;#&quot; will be ignored, if the header row
     starts with &quot;#&quot;, please assign flag &quot;-C&quot; another rare symbol, e.g. '$'.
  5. Do not mix use field (column) numbers and names to specify columns to operate.
  6. The CSV parser requires all the lines have same numbers of fields/columns.
     Even lines with spaces will cause error.
     Use '-I/--ignore-illegal-row' to skip these lines if neccessary.
     You can also use &quot;csvtk fix&quot; to fix files with different numbers of columns in rows.
  7. If double-quotes exist in fields not enclosed with double-quotes, e.g.,
         x,a &quot;b&quot; c,1
     It would report error:
         bare &quot; in non-quoted-field.
     Please switch on the flag &quot;-l&quot; or use &quot;csvtk fix-quotes&quot; to fix it.
  8. If somes fields have only a double-quote eighter in the beginning or in the end, e.g.,
         x,d &quot;e&quot;,&quot;a&quot; b c,1
     It would report error:
         extraneous or missing &quot; in quoted-field
     Please use &quot;csvtk fix-quotes&quot; to fix it, and use &quot;csvtk del-quotes&quot; to reset to the
     original format as needed.

Environment variables for frequently used global flags:

  - &quot;CSVTK_T&quot; for flag &quot;-t/--tabs&quot;
  - &quot;CSVTK_H&quot; for flag &quot;-H/--no-header-row&quot;
  - &quot;CSVTK_QUIET&quot; for flag &quot;--quiet&quot;

You can also create a soft link named &quot;tsvtk&quot; for &quot;csvtk&quot;, 
which sets &quot;-t/--tabs&quot; by default.

Usage:
  csvtk [flags]
  csvtk [command] 

Commands for Information:
  corr            calculate Pearson correlation between two columns
  dim             dimensions of CSV file
  headers         print headers
  ncol            print number of columns
  nrow            print number of records
  summary         summary statistics of selected numeric or text fields (groupby group fields)
  watch           monitor the specified fields

Format Conversion:
  csv2json        convert CSV to JSON format
  csv2md          convert CSV to markdown format
  csv2rst         convert CSV to reStructuredText format
  csv2tab         convert CSV to tabular format
  csv2xlsx        convert CSV/TSV files to XLSX file
  pretty          convert CSV to a readable aligned table
  space2tab       convert space delimited format to TSV
  splitxlsx       split XLSX sheet into multiple sheets according to column values
  tab2csv         convert tabular format to CSV
  xlsx2csv        convert XLSX to CSV format

Commands for Set Operation:
  comb            compute combinations of items at every row
  concat          concatenate CSV/TSV files by rows
  cut             select and arrange fields
  filter          filter rows by values of selected fields with arithmetic expression
  filter2         filter rows by awk-like arithmetic/string expressions
  freq            frequencies of selected fields
  grep            grep data by selected fields with patterns/regular expressions
  head            print first N records
  inter           intersection of multiple files
  join            join files by selected fields (inner, left and outer join)
  sample          sampling by proportion
  split           split CSV/TSV into multiple files according to column values
  uniq            unique data without sorting

Commands for Edit:
  add-header      add column names
  comma           make numbers more readable by adding commas
  del-header      delete column names
  del-quotes      remove extra double quotes added by 'fix-quotes'
  fix             fix CSV/TSV with different numbers of columns in rows
  fix-quotes      fix malformed CSV/TSV caused by double-quotes
  fmtdate         format date of selected fields
  mutate          create new column from selected fields by regular expression
  mutate2         create a new column from selected fields by awk-like arithmetic/string expressions
  mutate3         create a new column from selected fields with Go-like expressions
  rename          rename column names with new names
  rename2         rename column names by regular expression
  replace         replace data of selected fields by regular expression
  round           round float to n decimal places

Commands for Data Transformation:
  fold            fold multiple values of a field into cells of groups
  gather          gather columns into key-value pairs, like tidyr::gather/pivot_longer
  sep             separate column into multiple columns
  spread          spread a key-value pair across multiple columns, like tidyr::spread/pivot_wider
  transpose       transpose CSV data
  unfold          unfold multiple values in cells of a field

Commands for Ordering:
  sort            sort by selected fields

Commands for Ploting:
  plot            plot common figures

Commands for Miscellaneous Functions:
  cat             stream file to stdout and report progress on stderr

Additional Commands:
  genautocomplete generate shell autocompletion script (bash|zsh|fish|powershell)
  version         print version information and check for update

Flags:
  -C, --comment-char string    lines starting with commment-character will be ignored. if your header
                               row starts with '#', please assign &quot;-C&quot; another rare symbol, e.g. '$'
                               (default &quot;#&quot;)
  -U, --delete-header          do not output header row
  -d, --delimiter string       delimiting character of the input CSV file (default &quot;,&quot;)
  -h, --help                   help for csvtk
  -E, --ignore-empty-row       ignore empty rows
  -I, --ignore-illegal-row     ignore illegal rows. You can also use 'csvtk fix' to fix files with
                               different numbers of columns in rows
  -X, --infile-list string     file of input files list (one file per line), if given, they are appended
                               to files from cli arguments
  -l, --lazy-quotes            if given, a quote may appear in an unquoted field and a non-doubled quote
                               may appear in a quoted field
  -H, --no-header-row          specifies that the input CSV file does not have header row
  -j, --num-cpus int           number of CPUs to use (default 4)
  -D, --out-delimiter string   delimiting character of the output CSV file, e.g., -D $'\t' for tab
                               (default &quot;,&quot;)
  -o, --out-file string        out file (&quot;-&quot; for stdout, suffix .gz for gzipped out) (default &quot;-&quot;)
  -T, --out-tabs               specifies that the output is delimited with tabs. Overrides &quot;-D&quot;
      --quiet                  be quiet and do not show extra information and warnings
  -Z, --show-row-number        show row number as the first column, with header row skipped
  -t, --tabs                   specifies that the input CSV file is delimited with tabs. Overrides &quot;-d&quot;
  -V, --version                print version information

Use &quot;csvtk [command] --help&quot; for more information about a command.
</code></pre>
<h2 id="headers">headers</h2>
<p>Usage</p>
<pre><code class="language-text">print headers

Usage:
  csvtk headers [flags]

Flags:
  -h, --help      help for headers
  -v, --verbose   print verbose information

</code></pre>
<p>Examples</p>
<pre><code class="language-sh">$ csvtk headers testdata/[12].csv
name
attr
name
major

$ csvtk headers testdata/[12].csv -v
# testdata/1.csv
1       name
2       attr
# testdata/2.csv
1       name
2       major
</code></pre>
<h2 id="dimnrowncol">dim/nrow/ncol</h2>
<p>Usage</p>
<p>dim:</p>
<pre><code class="language-text">dimensions of CSV file

Usage:
  csvtk dim [flags]

Aliases:
  dim, size, stats, stat

Flags:
      --cols       only print number of columns
  -h, --help       help for dim
  -n, --no-files   do not print file names
      --rows       only print number of rows
      --tabular    output in machine-friendly tabular format

</code></pre>
<p>nrow:</p>
<pre><code class="language-text">print number of records

Usage:
  csvtk nrow [flags]

Aliases:
  nrow, nrows

Flags:
  -n, --file-name   print file names
  -h, --help        help for nrow

</code></pre>
<p>ncol:</p>
<pre><code class="language-text">print number of columns

Usage:
  csvtk ncol [flags]

Aliases:
  ncol, ncols

Flags:
  -n, --file-name   print file names
  -h, --help        help for ncol

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>with header row</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"

$ cat testdata/names.csv | csvtk size
file   num_cols   num_rows
-             4          5

$ cat testdata/names.csv | csvtk nrow
5

$ cat testdata/names.csv | csvtk ncol
4

$ csvtk nrow testdata/names.csv testdata/phones.csv -n
5       testdata/names.csv
4       testdata/phones.csv
</code></pre>
</li>
<li>
<p>no header row</p>
<pre><code>$ cat  testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ cat  testdata/digitals.tsv \
    | csvtk size -t -H
file   num_cols   num_rows
-             3          4

$ cat testdata/names.csv | csvtk nrow -H
3

$ cat testdata/names.csv | csvtk ncol -H
4
</code></pre>
</li>
</ol>
<h2 id="summary">summary</h2>
<p>Usage</p>
<pre><code class="language-text">summary statistics of selected numeric or text fields (groupby group fields)

Attention:

  1. Do not mix use field (column) numbers and names.

Available operations:

  # numeric/statistical operations
  # provided by github.com/gonum/stat and github.com/gonum/floats
  countn (count numeric values), min, max, sum, argmin, argmax,
  mean, stdev, variance, median, q1, q2, q3,
  entropy (Shannon entropy),
  prod (product of the elements)

  # textual/numeric operations
  count, first, last, rand, unique/uniq, collapse, countunique

Usage:
  csvtk summary [flags]

Flags:
  -w, --decimal-width int    limit floats to N decimal points (default 2)
  -f, --fields strings       operations on these fields. e.g -f 1:count,1:sum or -f colA:mean. available
                             operations: argmax, argmin, collapse, count, countn, countuniq,
                             countunique, entropy, first, last, max, mean, median, min, prod, q1, q2,
                             q3, rand, stdev, sum, uniq, unique, variance
  -g, --groups string        group via fields. e.g -f 1,2 or -f columnA,columnB
  -h, --help                 help for summary
  -i, --ignore-non-numbers   ignore non-numeric values like &quot;NA&quot; or &quot;N/A&quot;
  -S, --rand-seed int        rand seed for operation &quot;rand&quot; (default 11)
  -s, --separater string     separater for collapsed data (default &quot;; &quot;)

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>data</p>
<pre><code>$ cat testdata/digitals2.csv 
f1,f2,f3,f4,f5
foo,bar,xyz,1,0
foo,bar2,xyz,1.5,-1
foo,bar2,xyz,3,2
foo,bar,xyz,5,3
foo,bar2,xyz,N/A,4
bar,xyz,abc,NA,2
bar,xyz,abc2,1,-1
bar,xyz,abc,2,0
bar,xyz,abc,1,5
bar,xyz,abc,3,100
bar,xyz2,abc3,2,3
bar,xyz2,abc3,2,1
</code></pre>
</li>
<li>
<p>use flag <code>-i/--ignore-non-numbers</code></p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:sum
[ERRO] column 4 has non-digital data: N/A, you can use flag -i/--ignore-non-numbers to skip these data

$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:sum -i
f4:sum
21.50
</code></pre>
</li>
<li>
<p>multiple fields suported</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:sum,f5:sum -i
f4:sum,f5:sum
21.50,118.00
</code></pre>
</li>
<li>
<p>using fields instead of colname is still supported</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -f 4:sum,5:sum -i
f4:sum,f5:sum
21.50,118.00
</code></pre>
</li>
<li>
<p>but remember do not mix use column numbers and names</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:sum,5:sum -i
[ERRO] column "5" not existed in file: -

$ cat testdata/digitals2.csv \
    | csvtk summary -f 4:sum,f5:sum -i
[ERRO] failed to parse f5 as a field number, you may mix the use of field numbers and column names
</code></pre>
</li>
<li>
<p>groupby</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -i -f f4:sum,f5:sum -g f1,f2 \
    | csvtk pretty
f1    f2     f4:sum   f5:sum
---   ----   ------   ------
bar   xyz    7.00     106.00
bar   xyz2   4.00     4.00
foo   bar    6.00     3.00
foo   bar2   4.50     5.00
</code></pre>
</li>
<li>
<p>for data without header line</p>
<pre><code>$ cat testdata/digitals2.csv | sed 1d \
    | csvtk summary -H -i -f 4:sum,5:sum -g 1,2 \
    | csvtk pretty -H
bar   xyz    7.00   106.00
bar   xyz2   4.00   4.00
foo   bar    6.00   3.00
foo   bar2   4.50   5.00
</code></pre>
</li>
<li>
<p>numeric/statistical operations</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -i -g f1 -f f4:countn,f4:mean,f4:stdev,f4:q1,f4:q2,f4:mean,f4:q3,f4:min,f4:max \
    | csvtk pretty
f1    f4:countn   f4:mean   f4:stdev   f4:q1   f4:q2   f4:mean   f4:q3   f4:min   f4:max
---   ---------   -------   --------   -----   -----   -------   -----   ------   ------
bar   6           1.83      0.75       1.25    2.00    1.83      2.00    1.00     3.00
foo   4           2.62      1.80       1.38    2.25    2.62      3.50    1.00     5.00
</code></pre>
</li>
<li>
<p>textual/numeric operations</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -i -g f1 -f f2:count,f2:first,f2:last,f2:rand,f2:collapse,f2:uniq,f2:countunique \
    | csvtk pretty
f1    f2:count   f2:first   f2:last   f2:rand   f2:collapse                           f2:uniq     f2:countunique
---   --------   --------   -------   -------   -----------------------------------   ---------   --------------
bar   7          xyz        xyz2      xyz2      xyz; xyz; xyz; xyz; xyz; xyz2; xyz2   xyz; xyz2   2
foo   5          bar        bar2      bar2      bar; bar2; bar2; bar; bar2            bar2; bar
</code></pre>
</li>
<li>
<p>mixed operations</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -i -g f1 -f f4:collapse,f4:max \
    | csvtk pretty
f1    f4:collapse            f4:max
---   --------------------   ------
bar   NA; 1; 2; 1; 3; 2; 2   3.00
foo   1; 1.5; 3; 5; N/A      5.00
</code></pre>
</li>
<li>
<p><code>count</code> and <code>countn</code> (count of digits)</p>
<pre><code>$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:count,f4:countn -i \
    | csvtk pretty
f4:count   f4:countn
--------   ---------
12         10

# details:
$ cat testdata/digitals2.csv \
    | csvtk summary -f f4:count,f4:countn,f4:collapse -i -g f1 \
    | csvtk pretty
f1    f4:count   f4:countn   f4:collapse
---   --------   ---------   --------------------
bar   7          6           NA; 1; 2; 1; 3; 2; 2
foo   5          4           1; 1.5; 3; 5; N/A
</code></pre>
</li>
</ol>
<h2 id="watch">watch</h2>
<p>Usage</p>
<pre><code class="language-text">monitor the specified fields

Usage:
  csvtk watch [flags]

Flags:
  -B, --bins int         number of histogram bins (default -1)
  -W, --delay int        sleep this many seconds after plotting (default 1)
  -y, --dump             print histogram data to stderr instead of plotting
  -f, --field string     field to watch
  -h, --help             help for watch
  -O, --image string     save histogram to this PDF/image file
  -L, --log              log10(x+1) transform numeric values
  -x, --pass             passthrough mode (forward input to output)
  -p, --print-freq int   print/report after this many records (-1 for print after EOF) (default -1)
  -Q, --quiet            supress all plotting to stderr
  -R, --reset            reset histogram after every report
</code></pre>
<p>Examples</p>
<ol>
<li>
<p>Read whole file, plot histogram of field on the terminal and PDF</p>
<pre><code>csvtk -t watch -O hist.pdf -f MyField input.tsv
</code></pre>
</li>
<li>
<p>Monitor a TSV stream, print histogram every 1000 records</p>
<pre><code>cat input.tsv | csvtk -t watch -f MyField -p 1000 -
</code></pre>
</li>
<li>
<p>Monitor a TSV stream, print histogram every 1000 records, hang forever for updates</p>
<pre><code>tail -f +0 input.tsv | csvtk -t watch -f MyField -p 1000 -
</code></pre>
</li>
</ol>
<h2 id="corr">corr</h2>
<p>Usage</p>
<pre><code class="language-text">calculate Pearson correlation between two columns

Usage:
  csvtk corr [flags]

Flags:
  -f, --fields string   comma separated fields
  -h, --help            help for corr
  -i, --ignore_nan      Ignore non-numeric fields to avoid returning NaN
  -L, --log             Calcute correlations on Log10 transformed data
  -x, --pass            passthrough mode (forward input to output)
</code></pre>
<p>Examples</p>
<ol>
<li>Calculate pairwise correlations between field, ignore non-numeric values<pre><code>csvtk -t corr -i -f Foo,Bar input.tsv
</code></pre>
</li>
</ol>
<h2 id="pretty">pretty</h2>
<p>Usage</p>
<pre><code class="language-text">convert CSV to a readable aligned table

How to:
  1. First -n/--buf-rows rows are read to check the minimum and maximum widths
     of each columns.

     You can also set the global or column-specific (the number of values need
     equal to the number of columns) thresholds via -w/--min-width and -W/--max-width.

     1a. Cells longer than the maximum width will be wrapped (default) or
         clipped (--clip).
         Usually, the text is wrapped in space (-x/--wrap-delimiter). But if one
         word is longer than the -W/--max-width, it will be force split.
     1b. Texts are aligned left (default), center (-m/--align-center)
         or right (-r/--align-right). Users can specify columns with column names,
         field indexes or ranges.
        Examples:
          -m A,B       # column A and B
          -m 1,2       # 1st and 2nd column          
          -m -1        # the last column (it's not unselecting in other commands)
          -m 1,3-5     # 1st, from 3rd to 5th column
          -m 1-        # 1st and later columns (all columns)
          -m -3-       # the last 3 columns
          -m -3--2     # the 2nd and 3rd to last columns
          -m 1- -r -1  # all columns are center-aligned, except the last column
                       # which is right-aligned. -r overides -m.

  2. Remaining rows are read and immediately outputted, one by one, till the end.

Styles:

  Some preset styles are provided (-S/--style).

    default:

        id   size
        --   ----
        1    Huge
        2    Tiny

    plain:

        id   size
        1    Huge
        2    Tiny

    simple:

        -----------
         id   size
        -----------
         1    Huge
         2    Tiny
        -----------

    3line:

        ━━━━━━━━━━━
         id   size
        -----------
         1    Huge
         2    Tiny
        ━━━━━━━━━━━

    grid:

        +----+------+
        | id | size |
        +====+======+
        | 1  | Huge |
        +----+------+
        | 2  | Tiny |
        +----+------+

    light:

        ┌----┬------┐
        | id | size |
        ├====┼======┤
        | 1  | Huge |
        ├----┼------┤
        | 2  | Tiny |
        └----┴------┘

    round:

        ╭----┬------╮
        | id | size |
        ├====┼======┤
        | 1  | Huge |
        ├----┼------┤
        | 2  | Tiny |
        ╰----┴------╯

    bold:

        ┏━━━━┳━━━━━━┓
        ┃ id ┃ size ┃
        ┣━━━━╋━━━━━━┫
        ┃ 1  ┃ Huge ┃
        ┣━━━━╋━━━━━━┫
        ┃ 2  ┃ Tiny ┃
        ┗━━━━┻━━━━━━┛

    double:

        ╔════╦══════╗
        ║ id ║ size ║
        ╠════╬══════╣
        ║ 1  ║ Huge ║
        ╠════╬══════╣
        ║ 2  ║ Tiny ║
        ╚════╩══════╝

Usage:
  csvtk pretty [flags] 

Flags:
  -m, --align-center strings    align right for selected columns (field index/range or column name, type
                                &quot;csvtk pretty -h&quot; for examples)
  -r, --align-right strings     align right for selected columns (field index/range or column name, type
                                &quot;csvtk pretty -h&quot; for examples)
  -n, --buf-rows int            the number of rows to determine the min and max widths (0 for all rows)
                                (default 1024)
      --clip                    clip longer cell instead of wrapping
      --clip-mark string        clip mark (default &quot;...&quot;)
  -h, --help                    help for pretty
  -W, --max-width strings       max width, multiple values (max widths for each column, 0 for no limit)
                                should be separated by commas. E.g., -W 40,20,0 limits the max widths of
                                1st and 2nd columns
  -w, --min-width strings       min width, multiple values (min widths for each column, 0 for no limit)
                                should be separated by commas. E.g., -w 0,10,10 limits the min widths of
                                2nd and 3rd columns
  -s, --separator string        fields/columns separator (default &quot;   &quot;)
  -S, --style string            output syle. available vaules: default, plain, simple, 3line, grid,
                                light, round, bold, double. check https://github.com/shenwei356/stable
  -x, --wrap-delimiter string   delimiter for wrapping cells (default &quot; &quot;)

</code></pre>
<p>Examples:</p>
<ol>
<li>
<p>default</p>
<pre><code>$ csvtk pretty testdata/names.csv
id   first_name   last_name   username
--   ----------   ---------   --------
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123

$ csvtk pretty testdata/names.csv -H
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>tree-line table</p>
<pre><code>$ cat testdata/names.csv  | csvtk pretty -S 3line
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 id   first_name   last_name   username
----------------------------------------
 11   Rob          Pike        rob
 2    Ken          Thompson    ken
 4    Robert       Griesemer   gri
 1    Robert       Thompson    abc
 NA   Robert       Abel        123
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

$ cat testdata/names.csv  | csvtk pretty -S 3line -H
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 id   first_name   last_name   username
 11   Rob          Pike        rob
 2    Ken          Thompson    ken
 4    Robert       Griesemer   gri
 1    Robert       Thompson    abc
 NA   Robert       Abel        123
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
</code></pre>
</li>
<li>
<p>align right/center for some columns</p>
<pre><code>$ csvtk pretty testdata/names.csv -w 6 -S bold -r 1,username -m first_name 
┏━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━━┓
┃     id ┃ first_name ┃ last_name ┃ username ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃     11 ┃    Rob     ┃ Pike      ┃      rob ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃      2 ┃    Ken     ┃ Thompson  ┃      ken ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃      4 ┃   Robert   ┃ Griesemer ┃      gri ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃      1 ┃   Robert   ┃ Thompson  ┃      abc ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃     NA ┃   Robert   ┃ Abel      ┃      123 ┃
┗━━━━━━━━┻━━━━━━━━━━━━┻━━━━━━━━━━━┻━━━━━━━━━━┛

$ csvtk pretty testdata/names.csv -w 6 -S bold -m 1- -r -1
┏━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━━┓
┃   id   ┃ first_name ┃ last_name ┃ username ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃   11   ┃    Rob     ┃   Pike    ┃      rob ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃   2    ┃    Ken     ┃ Thompson  ┃      ken ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃   4    ┃   Robert   ┃ Griesemer ┃      gri ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃   1    ┃   Robert   ┃ Thompson  ┃      abc ┃
┣━━━━━━━━╋━━━━━━━━━━━━╋━━━━━━━━━━━╋━━━━━━━━━━┫
┃   NA   ┃   Robert   ┃   Abel    ┃      123 ┃
┗━━━━━━━━┻━━━━━━━━━━━━┻━━━━━━━━━━━┻━━━━━━━━━━┛
</code></pre>
</li>
<li>
<p>custom separator</p>
<pre><code>$ csvtk pretty testdata/names.csv -s " | "
id | first_name | last_name | username
-- | ---------- | --------- | --------
11 | Rob        | Pike      | rob
2  | Ken        | Thompson  | ken
4  | Robert     | Griesemer | gri
1  | Robert     | Thompson  | abc
NA | Robert     | Abel      | 123
</code></pre>
</li>
<li>
<p>Set the global minimum and maximum width.</p>
<pre><code>$ csvtk pretty testdata/long.csv -w 5 -W 40
id      name                 message
-----   ------------------   ----------------------------------------
1       Donec Vitae          Quis autem vel eum iure reprehenderit
                             qui in ea voluptate velit esse.
2       Quaerat Voluptatem   At vero eos et accusamus et iusto odio.
3       Aliquam lorem        Curabitur ullamcorper ultricies nisi.
                             Nam eget dui. Etiam rhoncus. Maecenas
                             tempus, tellus eget condimentum
                             rhoncus, sem quam semper libero.
</code></pre>
</li>
<li>
<p>Set min and max widths for all columns.</p>
<pre><code>$ csvtk pretty testdata/long.csv -w 5,25,0 -W 0,30,40 -m 1,2 -S round
╭-------┬---------------------------┬------------------------------------------╮
|  id   |           name            | message                                  |
├=======┼===========================┼==========================================┤
|   1   |        Donec Vitae        | Quis autem vel eum iure reprehenderit    |
|       |                           | qui in ea voluptate velit esse.          |
├-------┼---------------------------┼------------------------------------------┤
|   2   |    Quaerat Voluptatem     | At vero eos et accusamus et iusto odio.  |
├-------┼---------------------------┼------------------------------------------┤
|   3   |       Aliquam lorem       | Curabitur ullamcorper ultricies nisi.    |
|       |                           | Nam eget dui. Etiam rhoncus. Maecenas    |
|       |                           | tempus, tellus eget condimentum          |
|       |                           | rhoncus, sem quam semper libero.         |
╰-------┴---------------------------┴------------------------------------------╯
</code></pre>
</li>
<li>
<p>Clipping cells instead of wrapping</p>
<pre><code>$ csvtk pretty testdata/long.csv -w 5 -W 40 --clip
id      name                 message
-----   ------------------   ----------------------------------------
1       Donec Vitae          Quis autem vel eum iure reprehenderit...
2       Quaerat Voluptatem   At vero eos et accusamus et iusto odio.
3       Aliquam lorem        Curabitur ullamcorper ultricies nisi....
</code></pre>
</li>
<li>
<p>Change the output style</p>
<pre><code>$ csvtk pretty testdata/long.csv -W 40 -S grid
+----+--------------------+------------------------------------------+
| id | name               | message                                  |
+====+====================+==========================================+
| 1  | Donec Vitae        | Quis autem vel eum iure reprehenderit    |
|    |                    | qui in ea voluptate velit esse.          |
+----+--------------------+------------------------------------------+
| 2  | Quaerat Voluptatem | At vero eos et accusamus et iusto odio.  |
+----+--------------------+------------------------------------------+
| 3  | Aliquam lorem      | Curabitur ullamcorper ultricies nisi.    |
|    |                    | Nam eget dui. Etiam rhoncus. Maecenas    |
|    |                    | tempus, tellus eget condimentum          |
|    |                    | rhoncus, sem quam semper libero.         |
+----+--------------------+------------------------------------------+
</code></pre>
</li>
<li>
<p>Custom delimiter for wrapping</p>
<pre><code>$ csvtk pretty testdata/lineages.csv -W 60 -x ';' -S light
┌-------┬------------------┬--------------------------------------------------------------┐
| taxid | name             | complete lineage                                             |
├=======┼==================┼==============================================================┤
| 9606  | Homo sapiens     | cellular organisms;Eukaryota;Opisthokonta;Metazoa;Eumetazoa; |
|       |                  | Bilateria;Deuterostomia;Chordata;Craniata;Vertebrata;        |
|       |                  | Gnathostomata;Teleostomi;Euteleostomi;Sarcopterygii;         |
|       |                  | Dipnotetrapodomorpha;Tetrapoda;Amniota;Mammalia;Theria;      |
|       |                  | Eutheria;Boreoeutheria;Euarchontoglires;Primates;            |
|       |                  | Haplorrhini;Simiiformes;Catarrhini;Hominoidea;Hominidae;     |
|       |                  | Homininae;Homo;Homo sapiens                                  |
├-------┼------------------┼--------------------------------------------------------------┤
| 562   | Escherichia coli | cellular organisms;Bacteria;Pseudomonadota;                  |
|       |                  | Gammaproteobacteria;Enterobacterales;Enterobacteriaceae;     |
|       |                  | Escherichia;Escherichia coli                                 |
└-------┴------------------┴--------------------------------------------------------------┘
</code></pre>
</li>
</ol>
<h2 id="transpose">transpose</h2>
<p>Usage</p>
<pre><code class="language-text">transpose CSV data

Usage:
  csvtk transpose [flags]

</code></pre>
<p>Examples</p>
<pre><code>$ cat  testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ csvtk transpose -t  testdata/digitals.tsv
4       1       7       8
5       2       8       1,000
6       3       0       4
</code></pre>
<h2 id="csv2json">csv2json</h2>
<p>Usage</p>
<pre><code class="language-text">convert CSV to JSON format

Usage:
  csvtk csv2json [flags]

Flags:
  -b, --blanks              do not convert &quot;&quot;, &quot;na&quot;, &quot;n/a&quot;, &quot;none&quot;, &quot;null&quot;, &quot;.&quot; to null
  -h, --help                help for csv2json
  -i, --indent string       indent. if given blank, output json in one line. (default &quot;  &quot;)
  -k, --key string          output json as an array of objects keyed by a given filed rather than as a
                            list. e.g -k 1 or -k columnA
  -n, --parse-num strings   parse numeric values for nth column, multiple values are supported and
                            &quot;a&quot;/&quot;all&quot; for all columns

</code></pre>
<p>Examples</p>
<ul>
<li>
<p>test data</p>
<pre><code>$ cat testdata/data4json.csv 
ID,room,name,status
3,G13,Simon,true
5,103,Anna,TRUE
1e-3,2,,N/A
</code></pre>
</li>
<li>
<p>default operation</p>
<pre><code>$ cat testdata/data4json.csv | csvtk csv2json
[
  {
    "ID": "3",
    "room": "G13",
    "name": "Simon",
    "status": true
  },
  {
    "ID": "5",
    "room": "103",
    "name": "Anna",
    "status": true
  },
  {
    "ID": "1e-3",
    "room": "2",
    "name": null,
    "status": null
  }
]
</code></pre>
</li>
<li>
<p>change indent</p>
<pre><code>$ cat testdata/data4json.csv | csvtk csv2json -i ""
[{"ID":"3","room":"G13","name":"Simon","status":true},{"ID":"5","room":"103","name":"Anna","status":true},{"ID":"1e-3","room":"2","name":null,"status":null}]
</code></pre>
</li>
<li>
<p>output json as an array of objects keyed by a given filed rather than as a list.</p>
<pre><code>$ cat testdata/data4json.csv | csvtk csv2json -k ID
{
  "3": {
    "ID": "3",
    "room": "G13",
    "name": "Simon",
    "status": true
  },
  "5": {
    "ID": "5",
    "room": "103",
    "name": "Anna",
    "status": true
  },
  "1e-3": {
    "ID": "1e-3",
    "room": "2",
    "name": null,
    "status": null
  }
}
</code></pre>
</li>
<li>
<p>for CSV without header row</p>
<pre><code>$ cat testdata/data4json.csv | csvtk csv2json -H
[
  [
    "ID",
    "room",
    "name",
    "status"
  ],
  [
    "3",
    "G13",
    "Simon",
    "true"
  ],
  [
    "5",
    "103",
    "Anna",
    "TRUE"
  ],
  [
    "1e-3",
    "2",
    "",
    "N/A"
  ]
]
</code></pre>
</li>
<li>
<p>parse numeric values.</p>
<pre><code># cat testdata/data4json.csv | csvtk csv2json -n all    # for all columns
# cat testdata/data4json.csv | csvtk csv2json -n 1,2    # for multiple columns
$ cat testdata/data4json.csv | csvtk csv2json -n 1      # for single column
[
  {
    "ID": 3,
    "room": "G13",
    "name": "Simon",
    "status": true
  },
  {
    "ID": 5,
    "room": "103",
    "name": "Anna",
    "status": true
  },
  {
    "ID": 1e-3,
    "room": "2",
    "name": null,
    "status": null
  }
]
</code></pre>
</li>
<li>
<p>do not convert "", "na", "n/a", "none", "null", "." to null (just like csvjon --blanks in csvkit)</p>
<pre><code>$ cat testdata/data4json.csv | csvtk csv2json --blanks
[
  {
    "ID": "3",
    "room": "G13",
    "name": "Simon",
    "status": true
  },
  {
    "ID": "5",
    "room": "103",
    "name": "Anna",
    "status": true
  },
  {
    "ID": "1e-3",
    "room": "2",
    "name": "",
    "status": "N/A"
  }
]
</code></pre>
</li>
<li>
<p>values with <code>"</code>, <code>\</code>, <code>\n</code>.</p>
<pre><code>$ cat testdata/data4json2.csv
test
none
"Make America ""great"" again"
\nations
"This is a
MULTILINE
string"

$ csvtk csv2json testdata/data4json2.csv
[
  {
    "test": null
  },
  {
    "test": "Make America \"great\" again"
  },
  {
    "test": "\\nations"
  },
  {
    "test": "This is a\nMULTILINE\nstring"
  }
]
</code></pre>
</li>
</ul>
<h2 id="space2tab">space2tab</h2>
<p>Usage</p>
<pre><code class="language-text">convert space delimited format to TSV

Usage:
  csvtk space2tab [flags]

Flags:
  -b, --buffer-size string   size of buffer, supported unit: K, M, G. You need increase the value when
                             &quot;bufio.Scanner: token too long&quot; error reported (default &quot;1G&quot;)
  -h, --help                 help for space2tab

</code></pre>
<p>Exapmles</p>
<pre><code>$ echo a b | csvtk space2tab
a       b
</code></pre>
<h2 id="csv2md">csv2md</h2>
<p>Usage</p>
<pre><code class="language-text">convert CSV to markdown format

Attention:

  csv2md treats the first row as header line and requires them to be unique

Usage:
  csvtk csv2md [flags]

Flags:
  -a, --alignments string   comma separated alignments. e.g. -a l,c,c,c or -a c (default &quot;l&quot;)
  -w, --min-width int       min width (at least 3) (default 3)

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>give single alignment symbol</p>
<pre><code>$ cat testdata/names.csv | csvtk csv2md -a left
|id |first_name|last_name|username|
|:--|:---------|:--------|:-------|
|11 |Rob       |Pike     |rob     |
|2  |Ken       |Thompson |ken     |
|4  |Robert    |Griesemer|gri     |
|1  |Robert    |Thompson |abc     |
|NA |Robert    |Abel     |123     |
</code></pre>
<p>result:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">id</th>
<th style="text-align: left;">first_name</th>
<th style="text-align: left;">last_name</th>
<th style="text-align: left;">username</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">11</td>
<td style="text-align: left;">Rob</td>
<td style="text-align: left;">Pike</td>
<td style="text-align: left;">rob</td>
</tr>
<tr>
<td style="text-align: left;">2</td>
<td style="text-align: left;">Ken</td>
<td style="text-align: left;">Thompson</td>
<td style="text-align: left;">ken</td>
</tr>
<tr>
<td style="text-align: left;">4</td>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">Griesemer</td>
<td style="text-align: left;">gri</td>
</tr>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">Thompson</td>
<td style="text-align: left;">abc</td>
</tr>
<tr>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">Abel</td>
<td style="text-align: left;">123</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>give alignment symbols of all fields</p>
<pre><code>$ cat testdata/names.csv | csvtk csv2md -a c,l,l,l
|id |first_name|last_name|username|
|:-:|:---------|:--------|:-------|
|11 |Rob       |Pike     |rob     |
|2  |Ken       |Thompson |ken     |
|4  |Robert    |Griesemer|gri     |
|1  |Robert    |Thompson |abc     |
|NA |Robert    |Abel     |123     |
</code></pre>
<p>result</p>
<table>
<thead>
<tr>
<th style="text-align: center;">id</th>
<th style="text-align: left;">first_name</th>
<th style="text-align: left;">last_name</th>
<th style="text-align: left;">username</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">11</td>
<td style="text-align: left;">Rob</td>
<td style="text-align: left;">Pike</td>
<td style="text-align: left;">rob</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: left;">Ken</td>
<td style="text-align: left;">Thompson</td>
<td style="text-align: left;">ken</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">Griesemer</td>
<td style="text-align: left;">gri</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">Thompson</td>
<td style="text-align: left;">abc</td>
</tr>
<tr>
<td style="text-align: center;">NA</td>
<td style="text-align: left;">Robert</td>
<td style="text-align: left;">Abel</td>
<td style="text-align: left;">123</td>
</tr>
</tbody>
</table>
</li>
</ol>
<h2 id="csv2rst">csv2rst</h2>
<p>Usage</p>
<pre><code class="language-text">convert CSV to readable aligned table

Attention:

  1. row span is not supported.

Usage:
  csvtk csv2rst [flags]

Flags:
  -k, --cross string               charactor of cross (default &quot;+&quot;)
  -s, --header string              charactor of separator between header row and data rowws (default &quot;=&quot;)
  -h, --help                       help for csv2rst
  -b, --horizontal-border string   charactor of horizontal border (default &quot;-&quot;)
  -p, --padding string             charactor of padding (default &quot; &quot;)
  -B, --vertical-border string     charactor of vertical border (default &quot;|&quot;)

</code></pre>
<p>Example</p>
<ol>
<li>
<p>With header row</p>
<pre><code>$ csvtk csv2rst testdata/names.csv 
+----+------------+-----------+----------+
| id | first_name | last_name | username |
+====+============+===========+==========+
| 11 | Rob        | Pike      | rob      |
+----+------------+-----------+----------+
| 2  | Ken        | Thompson  | ken      |
+----+------------+-----------+----------+
| 4  | Robert     | Griesemer | gri      |
+----+------------+-----------+----------+
| 1  | Robert     | Thompson  | abc      |
+----+------------+-----------+----------+
| NA | Robert     | Abel      | 123      |
+----+------------+-----------+----------+
</code></pre>
</li>
<li>
<p>No header row</p>
<pre><code>$ csvtk csv2rst -H -t  testdata/digitals.tsv 
+---+-------+---+
| 4 | 5     | 6 |
+---+-------+---+
| 1 | 2     | 3 |
+---+-------+---+
| 7 | 8     | 0 |
+---+-------+---+
| 8 | 1,000 | 4 |
+---+-------+---+
</code></pre>
</li>
<li>
<p>Unicode</p>
<pre><code>$ cat  testdata/unicode.csv | csvtk csv2rst
+-------+---------+
| value | name    |
+=======+=========+
| 1     | 沈伟    |
+-------+---------+
| 2     | 沈伟b   |
+-------+---------+
| 3     | 沈小伟  |
+-------+---------+
| 4     | 沈小伟b |
+-------+---------+
</code></pre>
</li>
<li>
<p>Misc</p>
<pre><code>$ cat testdata/names.csv | head -n 1 | csvtk csv2rst 
+----+------------+-----------+----------+
| id | first_name | last_name | username |
+====+============+===========+==========+

$ cat testdata/names.csv | head -n 1 | csvtk csv2rst -H
+----+------------+-----------+----------+
| id | first_name | last_name | username |
+----+------------+-----------+----------+

$ echo | csvtk csv2rst -H
[ERRO] xopen: no content

$ echo "a" | csvtk csv2rst -H
+---+
| a |
+---+

$ echo "沈伟" | csvtk csv2rst -H
+------+
| 沈伟 |
+------+
</code></pre>
</li>
</ol>
<h2 id="csv2xlsx">csv2xlsx</h2>
<p>Usage</p>
<pre><code class="language-text">convert CSV/TSV files to XLSX file

Attention:

  1. Multiple CSV/TSV files are saved as separated sheets in .xlsx file.
  2. All input files should all be CSV or TSV.
  3. First rows are freezed unless given '-H/--no-header-row'.

Usage:
  csvtk csv2xlsx [flags]

Flags:
  -f, --format-numbers   save numbers in number format, instead of text
  -h, --help   help for csv2xlsx

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>Single input</p>
<pre><code>$ csvtk csv2xlsx ../testdata/names.csv -o output.xlsx

# check content

$ csvtk xlsx2csv -a output.xlsx
index   sheet
1       Sheet1

$ csvtk xlsx2csv output.xlsx | md5sum 
8e9d38a012cb02279a396a2f2dbbbca9  -

$ csvtk cut -f 1-  ../testdata/names.csv | md5sum 
8e9d38a012cb02279a396a2f2dbbbca9  -
</code></pre>
</li>
<li>
<p>Merging multiple CSV/TSV files into one .xlsx file.</p>
<pre><code>$ csvtk csv2xlsx ../testdata/names*.csv -o output.xlsx

$ csvtk xlsx2csv -a output.xlsx
index   sheet
1       names
2       names.reorder
3       names.with-unmatched-colname
</code></pre>
</li>
</ol>
<h2 id="xlsx2csv">xlsx2csv</h2>
<p>Usage</p>
<pre><code class="language-text">convert XLSX to CSV format

Usage:
  csvtk xlsx2csv [flags]

Flags:
  -h, --help                help for xlsx2csv
  -a, --list-sheets         list all sheets
  -i, --sheet-index int     Nth sheet to retrieve (default 1)
  -n, --sheet-name string   sheet to retrieve

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>list all sheets</p>
<pre><code>$ csvtk xlsx2csv ../testdata/accounts.xlsx -a
index   sheet
1       names
2       phones
3       region
</code></pre>
</li>
<li>
<p>retrieve sheet by index</p>
<pre><code>$ csvtk xlsx2csv ../testdata/accounts.xlsx -i 3
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there
</code></pre>
</li>
<li>
<p>retrieve sheet by name</p>
<pre><code>$ csvtk xlsx2sv ../testdata/accounts.xlsx -n region
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there
</code></pre>
</li>
</ol>
<h2 id="head">head</h2>
<p>Usage</p>
<pre><code class="language-text">print first N records

Usage:
  csvtk head [flags]

Flags:
  -n, --number int   print first N records (default 10)

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>with header line</p>
<pre><code>$ csvtk head -n 2 testdata/1.csv
name,attr
foo,cool
bar,handsome
</code></pre>
</li>
<li>
<p>no header line</p>
<pre><code>$ csvtk head -H -n 2 testdata/1.csv
name,attr
foo,cool
</code></pre>
</li>
</ol>
<h2 id="concat">concat</h2>
<p>Usage</p>
<pre><code class="language-text">concatenate CSV/TSV files by rows

Note that the second and later files are concatenated to the first one,
so only columns match that of the first files kept.

Usage:
  csvtk concat [flags]

Flags:
  -h, --help                    help for concat
  -i, --ignore-case             ignore case (column name)
  -k, --keep-unmatched          keep blanks even if no any data of a file matches
  -u, --unmatched-repl string   replacement for unmatched data

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>data</p>
<pre><code>$ csvtk pretty names.csv
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123

$ csvtk pretty  names.reorder.csv
last_name   username   id   first_name
Pike        rob        11   Rob
Thompson    ken        2    Ken
Griesemer   gri        4    Robert
Thompson    abc        1    Robert
Abel        123        NA   Robert

$ csvtk pretty  names.with-unmatched-colname.csv
id2   First_name   Last_name    Username   col
22    Rob33        Pike222      rob111     abc
44    Ken33        Thompson22   ken111     def
</code></pre>
</li>
<li>
<p>simple one</p>
<pre><code>$ csvtk concat names.csv names.reorder.csv \
    | csvtk pretty
id   first_name   last_name   username
--   ----------   ---------   --------
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>data with unmatched column names, and ignoring cases</p>
<pre><code>$ csvtk concat names.csv names.with-unmatched-colname.csv -i \
    | csvtk pretty
id   first_name   last_name    username
--   ----------   ----------   --------
11   Rob          Pike         rob
2    Ken          Thompson     ken
4    Robert       Griesemer    gri
1    Robert       Thompson     abc
NA   Robert       Abel         123
    Rob33        Pike222      rob111
    Ken33        Thompson22   ken111

 $ csvtk concat names.csv names.with-unmatched-colname.csv -i -u Unmached \
    | csvtk pretty
id         first_name   last_name    username
--------   ----------   ----------   --------
11         Rob          Pike         rob
2          Ken          Thompson     ken
4          Robert       Griesemer    gri
1          Robert       Thompson     abc
NA         Robert       Abel         123
Unmached   Rob33        Pike222      rob111
Unmached   Ken33        Thompson22   ken111
</code></pre>
</li>
<li>
<p>Sometimes data of one file does not matche any column, they are discared by default.
  But you can keep them using flag <code>-k/--keep-unmatched</code></p>
<pre><code>$ csvtk concat names.with-unmatched-colname.csv names.csv \
    | csvtk pretty
id2   First_name   Last_name    Username   col
---   ----------   ----------   --------   ---
22    Rob33        Pike222      rob111     abc
44    Ken33        Thompson22   ken111     def

$ csvtk concat names.with-unmatched-colname.csv names.csv -k -u NA \
    | csvtk pretty
id2   First_name   Last_name    Username   col
---   ----------   ----------   --------   ---
22    Rob33        Pike222      rob111     abc
44    Ken33        Thompson22   ken111     def
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
NA    NA           NA           NA         NA
</code></pre>
</li>
</ol>
<h2 id="sample">sample</h2>
<p>Usage</p>
<pre><code class="language-text">sampling by proportion

Usage:
  csvtk sample [flags]

Flags:
  -h, --help               help for sample
  -n, --line-number        print line number as the first column (&quot;n&quot;)
  -p, --proportion float   sample by proportion
  -s, --rand-seed int      rand seed (default 11)

</code></pre>
<p>Examples</p>
<pre><code class="language-sh">$ seq 100 | csvtk sample -H -p 0.5 | wc -l
46

$ seq 100 | csvtk sample -H -p 0.5 | wc -l
46

$ seq 100 | csvtk sample -H -p 0.1 | wc -l
10

$ seq 100 | csvtk sample -H -p 0.05 -n
50,50
52,52
65,65
</code></pre>
<h2 id="cut">cut</h2>
<p>Usage</p>
<pre><code class="language-text">select and arrange fields

Examples:

  1. Single column
     csvtk cut -f 1
     csvtk cut -f colA
  2. Multiple columns (replicates allowed)
     csvtk cut -f 1,3,2,1
     csvtk cut -f colA,colB,colA
  3. Column ranges
     csvtk cut -f 1,3-5       # 1, 3, 4, 5
     csvtk cut -f 3,5-        # 3rd col, and 5th col to the end
     csvtk cut -f 1-          # for all
     csvtk cut -f 2-,1        # move 1th col to the end
  4. Unselect
     csvtk cut -f -1,-3       # discard 1st and 3rd column
     csvtk cut -f -1--3       # discard 1st to 3rd column
     csvtk cut -f -2-         # discard 2nd and all columns on the right.
     csvtu cut -f -colA,-colB # discard colA and colB

Usage:
  csvtk cut [flags]

Flags:
  -m, --allow-missing-col   allow missing column
  -b, --blank-missing-col   blank missing column, only for using column fields
  -f, --fields string       select only these fields. type &quot;csvtk cut -h&quot; for examples
  -F, --fuzzy-fields        using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                help for cut
  -i, --ignore-case         ignore case (column name)
  -u, --uniq-column         deduplicate columns matched by multiple fuzzy column names

</code></pre>
<p>Examples</p>
<ul>
<li>
<p>data:</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>Select columns by column index: <code>csvtk cut -f 1,2</code></p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f 1,2
id,first_name
11,Rob
2,Ken
4,Robert
1,Robert
NA,Robert

# select more than once
$ cat testdata/names.csv \
    | csvtk cut -f 1,2,2
id,first_name,first_name
11,Rob,Rob
2,Ken,Ken
4,Robert,Robert
1,Robert,Robert
NA,Robert,Robert
</code></pre>
</li>
<li>
<p>Select columns by column names: <code>csvtk cut -f first_name,username</code></p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f first_name,username
first_name,username
Rob,rob
Ken,ken
Robert,gri
Robert,abc
Robert,123

# select more than once
$ cat testdata/names.csv \
    | csvtk cut -f first_name,username,username
first_name,username,username
Rob,rob,rob
Ken,ken,ken
Robert,gri,gri
Robert,abc,abc
Robert,123,123
</code></pre>
</li>
<li>
<p><strong>Unselect</strong>:</p>
<ul>
<li>
<p>select 3+ columns: <code>csvtk cut -f -1,-2</code></p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f -1,-2
last_name,username
Pike,rob
Thompson,ken
Griesemer,gri
Thompson,abc
Abel,123
</code></pre>
</li>
<li>
<p>select columns except 1-3</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f -1--3
username
rob
ken
gri
abc
123
</code></pre>
</li>
<li>
<p>select columns except <code>first_name</code>: <code>csvtk cut -f -first_name</code></p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f -first_name
id,last_name,username
11,Pike,rob
2,Thompson,ken
4,Griesemer,gri
1,Thompson,abc
NA,Abel,123
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Fuzzy fields</strong> using wildcard character,  <code>csvtk cut -F -f "*_name,username"</code></p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -F -f "*_name,username"
first_name,last_name,username
Rob,Pike,rob
Ken,Thompson,ken
Robert,Griesemer,gri
Robert,Thompson,abc
Robert,Abel,123
</code></pre>
</li>
<li>
<p>All fields: <code>csvtk cut -F -f "*"</code> or <code>csvtk cut -f 1-</code>.</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -F -f "*"
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
1,Robert,Thompson,abc
NA,Robert,Abel,123
</code></pre>
</li>
<li>
<p>Field ranges (read help message ("csvtk cut -f") for more examples)</p>
<ul>
<li>
<p><code>csvtk cut -f 2-4</code> for column 2,3,4</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f 2-4
first_name,last_name,username
Rob,Pike,rob
Ken,Thompson,ken
Robert,Griesemer,gri
Robert,Thompson,abc
Robert,Abel,123
</code></pre>
</li>
<li>
<p><code>csvtk cut -f -3--1</code> for discarding column 1,2,3</p>
<pre><code># or -f -1--3
$ cat testdata/names.csv \
    | csvtk cut -f -3--1
username
rob
ken
gri
abc
123
</code></pre>
</li>
<li>
<p><code>csvtk cut -f 2-,1</code> for moving 1th column to the end.</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f 2-,1
first_name,last_name,username,id
Rob,Pike,rob,11
Ken,Thompson,ken,2
Robert,Griesemer,gri,4
Robert,Thompson,abc,1
Robert,Abel,123,NA
</code></pre>
</li>
<li>
<p><code>csvtk cut -f 1,1</code> for duplicating columns</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f 1,1
id,id
11,11
2,2
4,4
1,1
NA,NA
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="uniq">uniq</h2>
<p>Usage</p>
<pre><code class="language-text">unique data without sorting

Usage:
  csvtk uniq [flags]

Flags:
  -f, --fields string   select these fields as keys. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help            help for uniq
  -i, --ignore-case     ignore case
  -n, --keep-n int      keep at most N records for a key (default 1)

</code></pre>
<p>Examples:</p>
<ul>
<li>
<p>data:</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>unique first_name (it removes rows with duplicated first_name)</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk uniq -f first_name
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>unique first_name, a more common way</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk cut -f first_name \
    | csvtk uniq -f 1
first_name
Rob
Ken
Robert
</code></pre>
</li>
<li>
<p>keep top 2 items for every group.</p>
<pre><code>$ cat testdata/players.csv 
gender,id,name
male,1,A
male,2,B
male,3,C
female,11,a
female,12,b
female,13,c
female,14,d

$ cat testdata/players.csv  \
    | csvtk sort -k gender:N -k id:nr \
    | csvtk uniq -f gender -n 2
gender,id,name
female,14,d
female,13,c
male,3,C
male,2,B
</code></pre>
</li>
</ul>
<h2 id="freq">freq</h2>
<p>Usage</p>
<pre><code class="language-text">frequencies of selected fields

Usage:
  csvtk freq [flags]

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -i, --ignore-case     ignore case
  -r, --reverse         reverse order while sorting
  -n, --sort-by-freq    sort by frequency
  -k, --sort-by-key     sort by key

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>one filed</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk freq -f first_name | csvtk pretty
first_name   frequency
Ken          1
Rob          1
Robert       3
</code></pre>
</li>
<li>
<p>sort by frequency. you can also use <code>csvtk sort</code> with more sorting options</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk freq -f first_name -n -r \
    | csvtk pretty
first_name   frequency
Robert       3
Ken          1
Rob          1
</code></pre>
</li>
<li>
<p>sorty by key</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk freq -f first_name -k \
    | csvtk pretty
first_name   frequency
Ken          1
Rob          1
Robert       3
</code></pre>
</li>
<li>
<p>multiple fields</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk freq -f first_name,last_name \
    | csvtk pretty
first_name   last_name   frequency
Robert       Abel        1
Ken          Thompson    1
Rob          Pike        1
Robert       Thompson    1
Robert       Griesemer   1
</code></pre>
</li>
<li>
<p>data without header row</p>
<pre><code>$ cat testdata/ testdata/digitals.tsv \
    | csvtk -t -H freq -f 1
8       1
1       1
4       1
7       1
</code></pre>
</li>
</ol>
<h2 id="inter">inter</h2>
<p>Usage</p>
<pre><code class="language-text">intersection of multiple files

Attention:

  1. fields in all files should be the same, 
     if not, extracting to another file using &quot;csvtk cut&quot;.

Usage:
  csvtk inter [flags]

Flags:
  -f, --fields string   select these fields as the key. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -i, --ignore-case     ignore case

</code></pre>
<p>Examples:</p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/region.csv
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there

$ csvtk inter testdata/phones.csv testdata/region.csv
username
gri
ken
shenwei
</code></pre>
<h2 id="grep">grep</h2>
<p>Usage</p>
<pre><code class="language-text">grep data by selected fields with patterns/regular expressions

Attentions:

  1. By default, we directly compare the column value with patterns,
     use &quot;-r/--use-regexp&quot; for partly matching.
  2. Multiple patterns can be given by setting '-p/--pattern' more than once,
     or giving comma separated values (CSV formats).
     Therefore, please use double quotation marks for patterns containing
     comma, e.g., -p '&quot;A{2,}&quot;'

Usage:
  csvtk grep [flags]

Flags:
      --delete-matched        delete a pattern right after being matched, this keeps the firstly matched
                              data and speedups when using regular expressions
  -f, --fields string         comma separated key fields, column name or index. e.g. -f 1-3 or -f id,id2
                              or -F -f &quot;group*&quot; (default &quot;1&quot;)
  -F, --fuzzy-fields          using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                  help for grep
  -i, --ignore-case           ignore case
      --immediate-output      print output immediately, do not use write buffer
  -v, --invert                invert match
  -n, --line-number           print line number as the first column (&quot;n&quot;)
  -N, --no-highlight          no highlight
  -p, --pattern strings       query pattern (multiple values supported). Attention: use double quotation
                              marks for patterns containing comma, e.g., -p '&quot;A{2,}&quot;'
  -P, --pattern-file string   pattern files (one pattern per line)
  -r, --use-regexp            patterns are regular expression
      --verbose               verbose output

</code></pre>
<p>Examples</p>
<p>Matched parts will be <strong><em>highlight</em></strong>.</p>
<ul>
<li>
<p>By exact keys</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk grep -f last_name -p Pike -p Abel \
    | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
NA   Robert       Abel        123

# another form of multiple keys 
$ csvtk grep -f last_name -p Pike,Abel,Tom
</code></pre>
</li>
<li>
<p>By regular expression: <code>csvtk grep -f first_name -r -p Rob</code></p>
<pre><code>$ cat testdata/names.csv \
    | csvtk grep -f first_name -r -p Rob \
    | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>By pattern list</p>
<pre><code>$ csvtk grep -f first_name -P name_list.txt
</code></pre>
</li>
<li>
<p>Remore rows containing any missing data (NA): </p>
<pre><code>$ csvtk grep -F -f "*" -r -p "^$" -v
</code></pre>
</li>
<li>
<p>Show line number</p>
<pre><code>$ cat names.csv \
    | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123

$ cat names.csv \
    | csvtk grep -f first_name -r -i -p rob -n \
    | csvtk pretty
row   id   first_name   last_name   username
---   --   ----------   ---------   --------
1     11   Rob          Pike        rob
3     4    Robert       Griesemer   gri
4     1    Robert       Thompson    abc
5     NA   Robert       Abel        123
</code></pre>
</li>
</ul>
<h2 id="filter">filter</h2>
<p>Usage</p>
<pre><code class="language-text">filter rows by values of selected fields with arithmetic expression

Usage:
  csvtk filter [flags]

Flags:
      --any             print record if any of the field satisfy the condition
  -f, --filter string   filter condition. e.g. -f &quot;age&gt;12&quot; or -f &quot;1,3&lt;=2&quot; or -F -f &quot;c*!=0&quot;
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help            help for filter
  -n, --line-number     print line number as the first column (&quot;n&quot;)

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>single field</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"

$ cat testdata/names.csv \
    | csvtk filter -f "id&gt;0" \
    | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
</code></pre>
</li>
<li>
<p>multiple fields</p>
<pre><code>$ cat  testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ cat  testdata/digitals.tsv \
    | csvtk -t -H filter -f "1-3&gt;0"
4       5       6
1       2       3
8       1,000   4
</code></pre>
<p>using <code>--any</code> to print record if any of the field satisfy the condition</p>
<pre><code>$  cat  testdata/digitals.tsv \
    | csvtk -t -H filter -f "1-3&gt;0" --any
4       5       6
1       2       3
7       8       0
8       1,000   4
</code></pre>
</li>
<li>
<p>fuzzy fields</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk filter -F -f "i*!=0"
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
1,Robert,Thompson,abc
</code></pre>
</li>
</ol>
<h2 id="filter2">filter2</h2>
<p>Usage</p>
<pre><code class="language-text">filter rows by awk-like arithmetic/string expressions

The arithmetic/string expression is supported by:

  https://github.com/Knetic/govaluate

Variables formats:
  $1 or ${1}                        The first field/column
  $a or ${a}                        Column &quot;a&quot;
  ${a,b} or ${a b} or ${a (b)}      Column name with special charactors,
                                    e.g., commas, spaces, and parentheses

Supported operators and types:

  Modifiers: + - / * &amp; | ^ ** % &gt;&gt; &lt;&lt;
  Comparators: &gt; &gt;= &lt; &lt;= == != =~ !~ in
  Logical ops: || &amp;&amp;
  Numeric constants, as 64-bit floating point (12345.678)
  String constants (single quotes: 'foobar')
  Date constants (single quotes)
  Boolean constants: true false
  Parenthesis to control order of evaluation ( )
  Arrays (anything separated by , within parenthesis: (1, 2, 'foo'))
  Prefixes: ! - ~
  Ternary conditional: ? :
  Null coalescence: ??

Custom functions:
  - len(), length of strings, e.g., len($1), len($a), len($1, $2)
  - ulen(), length of unicode strings/width of unicode strings rendered
    to a terminal, e.g., len(&quot;沈伟&quot;)==6, ulen(&quot;沈伟&quot;)==4

Usage:
  csvtk filter2 [flags]

Flags:
  -f, --filter string       awk-like filter condition. e.g. '$age&gt;12' or '$1 &gt; $3' or '$name==&quot;abc&quot;' or
                            '$1 % 2 == 0'
  -h, --help                help for filter2
  -n, --line-number         print line number as the first column (&quot;n&quot;)
  -s, --numeric-as-string   treat even numeric fields as strings to avoid converting big numbers into
                            scientific notation

</code></pre>
<p>Examples:</p>
<ol>
<li>
<p>filter rows with <code>id</code> greater than 3:</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"

$ cat testdata/names.csv \
    | csvtk filter2 -f '$id &gt; 3'
id,first_name,last_name,username
11,Rob,Pike,rob
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>arithmetic and string expressions</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk filter2 -f '$id &gt; 3 || $username=="ken"'
id,first_name,last_name,username
11,Rob,Pike,rob
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>More arithmetic expressions</p>
<pre><code>$ cat testdata/digitals.tsv
4       5       6
1       2       3
7       8       0
8       1,000   4

$ cat testdata/digitals.tsv \
    | csvtk filter2 -H -t -f '$1 &gt; 2 &amp;&amp; $2 % 2 == 0'
7       8       0
8       1,000   4

# comparison between fields and support
$ cat testdata/digitals.tsv \
    | csvtk filter2 -H -t -f '$2 &lt;= $3 || ( $1 / $2 &gt; 0.5 )'
4       5       6
1       2       3
7       8       0
</code></pre>
</li>
<li>
<p>Array expressions using <code>in</code> numeric or string (<strong>case sensitive</strong>)</p>
<pre><code>$ cat testdata/names.csv | csvtk filter2 -f '$first_name in ("Ken", "Rob", "robert")'
id,first_name,last_name,username\
11,Rob,Pike,rob
2,Ken,Thompson,ken

$ cat testdata/names.csv | csvtk filter2 -f '$id in (2, 4)'
id,first_name,last_name,username
2,Ken,Thompson,ken
4,Robert,Griesemer,gri

# negate by wrapping entire expression in `!()`
$ cat testdata/names.csv | csvtk filter2 -f '!($username in ("rob", "ken"))'
id,first_name,last_name,username
4,Robert,Griesemer,gri
1,Robert,Thompson,abc
NA,Robert,Abel,123
</code></pre>
</li>
</ol>
<h2 id="join">join</h2>
<p>Usage</p>
<pre><code class="language-text">join files by selected fields (inner, left and outer join).

Attention:

  1. Multiple keys supported
  2. Default operation is inner join, use --left-join for left join
     and --outer-join for outer join.

Usage:
  csvtk join [flags]

Aliases:
  join, merge

Flags:
  -f, --fields string     Semicolon separated key fields of all files, if given one, we think all the
                          files have the same key columns. Fields of different files should be separated
                          by &quot;;&quot;, e.g -f &quot;1;2&quot; or -f &quot;A,B;C,D&quot; or -f id (default &quot;1&quot;)
  -F, --fuzzy-fields      using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help              help for join
  -i, --ignore-case       ignore case
  -n, --ignore-null       do not match NULL values
  -k, --keep-unmatched    keep unmatched data of the first file (left join)
  -L, --left-join         left join, equals to -k/--keep-unmatched, exclusive with --outer-join
      --na string         content for filling NA data
  -P, --only-duplicates   add filenames as colname prefixes or add custom suffixes only for duplicated
                          colnames
  -O, --outer-join        outer join, exclusive with --left-join
  -p, --prefix-filename   add each filename as a prefix to each colname. if there's no header row, we'll
                          add one
  -e, --prefix-trim-ext   trim extension when adding filename as colname prefix
  -s, --suffix strings    add suffixes to colnames from each file

</code></pre>
<p>Examples:</p>
<ul>
<li>
<p>data</p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/region.csv
name,region
ken,nowhere
gri,somewhere
shenwei,another
Thompson,there
</code></pre>
</li>
<li>
<p>All files have same key column: <code>csvtk join -f id file1.csv file2.csv</code></p>
<pre><code>$ csvtk join -f 1 testdata/phones.csv testdata/region.csv \
    | csvtk pretty
username   phone    region
gri        11111    somewhere
ken        22222    nowhere
shenwei    999999   another
</code></pre>
</li>
<li>
<p>keep unmatched (left join)</p>
<pre><code>$ csvtk join -f 1 testdata/phones.csv testdata/region.csv --left-join \
    | csvtk pretty
username   phone    region
gri        11111    somewhere
rob        12345    
ken        22222    nowhere
shenwei    999999   another
</code></pre>
</li>
<li>
<p>keep unmatched and fill with something</p>
<pre><code>$ csvtk join -f 1 testdata/phones.csv testdata/region.csv --left-join --na NA \
    | csvtk pretty
username   phone    region
gri        11111    somewhere
rob        12345    NA
ken        22222    nowhere
shenwei    999999   another
</code></pre>
</li>
<li>
<p>Outer join</p>
<pre><code>$ csvtk join -f 1 testdata/phones.csv testdata/region.csv --outer-join --na NA \
    | csvtk pretty
username   phone    region
gri        11111    somewhere
rob        12345    NA
ken        22222    nowhere
shenwei    999999   another
Thompson   NA       there
</code></pre>
</li>
<li>
<p>Files have different key columns: <code>csvtk join -f "username;username;name" testdata/names.csv phone.csv adress.csv -k</code>. <strong><em>Note that fields are separated with <code>;</code> not <code>,</code>.</em></strong></p>
<pre><code>$ csvtk join -f "username;name"  testdata/phones.csv testdata/region.csv --left-join --na NA \
    | csvtk pretty
username   phone    region
gri        11111    somewhere
rob        12345    NA
ken        22222    nowhere
shenwei    999999   another
</code></pre>
</li>
<li>
<p>Adding each filename as a prefix to each colname</p>
<pre><code>$ cat testdata/1.csv 
name,attr
foo,cool
bar,handsome
bob,beutiful

$ cat testdata/2.csv 
name,major
bar,bioinformatics
bob,microbiology
bob,computer science

$ csvtk join testdata/{1,2}.csv \
    | csvtk pretty 
name   attr       major
----   --------   -----------------
bar    handsome   bioinformatics
bob    beutiful   microbiology
bob    beutiful   computer science

$ csvtk join testdata/{1,2}.csv --prefix-filename \
    | csvtk pretty 
name   1.csv-attr   2.csv-major
----   ----------   -----------------
bar    handsome     bioinformatics
bob    beutiful     microbiology
bob    beutiful     computer science

# trim the file extention
$ csvtk join testdata/{1,2}.csv --prefix-filename --prefix-trim-ext \
     | csvtk pretty 
name   1-attr     2-major
----   --------   -----------------
bar    handsome   bioinformatics
bob    beutiful   microbiology
bob    beutiful   computer science
</code></pre>
</li>
<li>
<p>Adding each filename as a prefix to each colname <strong>for data without header row</strong></p>
<pre><code>$ cat testdata/A.f.csv 
a,x,1
b,y,2

$ cat testdata/B.f.csv 
a,x,3
b,y,4

$ cat testdata/C.f.csv 
a,x,5
b,y,6

$ csvtk join -H testdata/{A,B,C}.f.csv \
    | csvtk pretty -H
a   x   1   x   3   x   5
b   y   2   y   4   y   6

$ csvtk join -H testdata/{A,B,C}.f.csv -p \
    | csvtk pretty
key1   A.f.csv   A.f.csv   B.f.csv   B.f.csv   C.f.csv   C.f.csv
----   -------   -------   -------   -------   -------   -------
a      x         1         x         3         x         5
b      y         2         y         4         y         6

# trim file extention
$ csvtk join -H testdata/{A,B,C}.f.csv -p -e \
    | csvtk pretty
key1   A.f   A.f   B.f   B.f   C.f   C.f
----   ---   ---   ---   ---   ---   ---
a      x     1     x     3     x     5
b      y     2     y     4     y     6

# use column 1 and 2 as keys
$ csvtk join -H testdata/{A,B,C}.f.csv -p -e -f 1,2 \
    | csvtk pretty
key1   key2   A.f   B.f   C.f
----   ----   ---   ---   ---
a      x      1     3     5
b      y      2     4     6

# change column names furthor
$ csvtk join -H testdata/{A,B,C}.f.csv -p -e -f 1,2 \
    | csvtk rename2 -F -f '*' -p '\.f$' \
    | csvtk pretty
key1   key2   A   B   C
----   ----   -   -   -
a      x      1   3   5
b      y      2   4   6
</code></pre>
</li>
<li>
<p>add suffixes to colnames from each file (<code>-s/--suffix</code>)</p>
<pre><code>$ csvtk join -H testdata/{A,B,C}.f.csv -s A,B,C  \
    | csvtk pretty
key1   c2-A   c3-A   c2-B   c3-B   c2-C   c3-C
----   ----   ----   ----   ----   ----   ----
a      x      1      x      3      x      5
b      y      2      y      4      y      6
</code></pre>
</li>
</ul>
<h2 id="split">split</h2>
<p>Usage</p>
<pre><code class="language-text">split CSV/TSV into multiple files according to column values

Notes:

  1. flag -o/--out-file can specify out directory for splitted files.
  2. flag -s/--prefix-as-subdir can create subdirectories with prefixes of
     keys of length X, to avoid writing too many files in the output directory.

Usage:
  csvtk split [flags]

Flags:
  -g, --buf-groups int         buffering N groups before writing to file (default 100)
  -b, --buf-rows int           buffering N rows for every group before writing to file (default 100000)
  -f, --fields string          comma separated key fields, column name or index. e.g. -f 1-3 or -f
                               id,id2 or -F -f &quot;group*&quot; (default &quot;1&quot;)
      --force                  overwrite existing output directory (given by -o).
  -F, --fuzzy-fields           using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                   help for split
  -i, --ignore-case            ignore case
  -G, --out-gzip               force output gzipped file
  -p, --out-prefix string      output file prefix, the default value is the input file. use -p &quot;&quot; to
                               disable outputting prefix
  -s, --prefix-as-subdir int   create subdirectories with prefixes of keys of length X, to avoid writing
                               too many files in the output directory

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>Test data</p>
<pre><code>$ cat names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>split according to <code>first_name</code></p>
<pre><code>$ csvtk split names.csv -f first_name
$ ls *.csv
names.csv  names-Ken.csv  names-Rob.csv  names-Robert.csv

$ cat names-Ken.csv
id,first_name,last_name,username
2,Ken,Thompson,ken

$ cat names-Rob.csv
id,first_name,last_name,username
11,Rob,Pike,rob

$ cat names-Robert.csv
id,first_name,last_name,username
4,Robert,Griesemer,gri
1,Robert,Thompson,abc
NA,Robert,Abel,123
</code></pre>
</li>
<li>
<p>split according to <code>first_name</code> and <code>last_name</code></p>
<pre><code>$ csvtk split names.csv -f first_name,last_name
$ ls *.csv
names.csv               names-Robert-Abel.csv       names-Robert-Thompson.csv
names-Ken-Thompson.csv  names-Robert-Griesemer.csv  names-Rob-Pike.csv
</code></pre>
</li>
<li>
<p>flag <code>-o/--out-file</code> can specify out directory for splitted files</p>
<pre><code>$ seq 10000 | csvtk split -H -o result
$ ls result/*.csv | wc -l
10000
</code></pre>
</li>
<li>
<p>Do not output prefix, use <code>-p ""</code>.</p>
<pre><code>$ echo -ne "1,ACGT\n2,GGCA\n3,ACAAC\n"
1,ACGT
2,GGCA
3,ACAAC

$ echo -ne "1,ACGT\n2,GGCA\n3,ACAAC\n" | csvtk split -H -f 2 -o t -p "" -s 3 --force

$ tree t
t
├── ACA
│   └── ACAAC.csv
├── ACG
│   └── ACGT.csv
└── GGC
    └── GGCA.csv

4 directories, 3 files
</code></pre>
</li>
<li>
<p>extreme example 1: lots (1M) of rows in groups</p>
<pre><code>$ yes 2 | head -n 10000000 | gzip -c &gt; t.gz

$ memusg -t csvtk -H split t.gz
elapsed time: 5.859s
peak rss: 41.45 MB

# check
$ zcat t-2.gz | wc -l
10000000
$ zcat t-2.gz | md5sum
f194afd7cecf645c0e3cce50c9bc526e  -
$ zcat t.gz | md5sum
f194afd7cecf645c0e3cce50c9bc526e  -
</code></pre>
</li>
<li>
<p>extreme example 2: lots (10K) of groups</p>
<pre><code>$ seq 10000 | gzip -c &gt; t2.gz

$ memusg -t csvtk -H split t2.gz  -o t2
elapsed time: 20.856s
peak rss: 23.77 MB

# check
$ ls t2/*.gz | wc -l
10000
$ zcat t2/*.gz | sort -k 1,1n | md5sum
72d4ff27a28afbc066d5804999d5a504  -
$ zcat t2.gz | md5sum
72d4ff27a28afbc066d5804999d5a504  -
</code></pre>
<p>since, v0.31.0, the flag <code>-s/--prefix-as-subdir</code> can create subdirectories with prefixes of
keys of length X, to avoid writing too many files in the output directory.</p>
<pre><code>$ memusg -t csvtk -H split t2.gz -o t2 -s 3
elapsed time: 2.668s
peak rss: 1.79 GB
</code></pre>
<p>$ fd .gz$ t2 | rush 'zcat {}' | sort -k 1,1n | md5sum
  72d4ff27a28afbc066d5804999d5a504  -</p>
<pre><code>$ tree t2/ | more
t2/
├── 100
│   ├── t2-10000.gz
│   ├── t2-1000.gz
│   ├── t2-1001.gz
│   ├── t2-1002.gz
│   ├── t2-1003.gz
│   ├── t2-1004.gz
│   ├── t2-1005.gz
│   ├── t2-1006.gz
│   ├── t2-1007.gz
│   ├── t2-1008.gz
│   └── t2-1009.gz
├── 101
│   ├── t2-1010.gz
│   ├── t2-1011.gz
...
├── t2-994.gz
├── t2-995.gz
├── t2-996.gz
├── t2-997.gz
├── t2-998.gz
├── t2-999.gz
├── t2-99.gz
└── t2-9.gz

901 directories, 10000 files
</code></pre>
</li>
</ol>
<h2 id="splitxlsx">splitxlsx</h2>
<p>Usage</p>
<pre><code class="language-text">split XLSX sheet into multiple sheets according to column values

Strengths: Sheet properties are remained unchanged.
Weakness : Complicated sheet structures are not well supported, e.g.,
  1. merged cells
  2. more than one header row

Usage:
  csvtk splitxlsx [flags]

Flags:
  -f, --fields string       comma separated key fields, column name or index. e.g. -f 1-3 or -f id,id2
                            or -F -f &quot;group*&quot; (default &quot;1&quot;)
  -F, --fuzzy-fields        using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                help for splitxlsx
  -i, --ignore-case         ignore case (cell value)
  -a, --list-sheets         list all sheets
  -N, --sheet-index int     Nth sheet to retrieve (default 1)
  -n, --sheet-name string   sheet to retrieve

</code></pre>
<p>Examples</p>
<ol>
<li>
<p>example data</p>
<pre><code># list all sheets
$ csvtk xlsx2csv -a accounts.xlsx
index   sheet
1       names
2       phones
3       region

# data of sheet "names"
$ csvtk xlsx2csv accounts.xlsx | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
<li>
<p>split sheet "names" according to <code>first_name</code></p>
<pre><code>$ csvtk splitxlsx accounts.xlsx -n names -f first_name

$ ls accounts.*
accounts.split.xlsx  accounts.xlsx

$ csvtk splitxlsx -a accounts.split.xlsx
index   sheet
1       names
2       phones
3       region
4       Rob
5       Ken
6       Robert

$ csvtk xlsx2csv accounts.split.xlsx -n Rob \
    | csvtk pretty
id   first_name   last_name   username
11   Rob          Pike        rob

$ csvtk xlsx2csv accounts.split.xlsx -n Robert \
    | csvtk pretty
id   first_name   last_name   username
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
</code></pre>
</li>
</ol>
<h2 id="comb">comb</h2>
<p>Usage</p>
<pre><code>compute combinations of items at every row

Usage:
  csvtk comb [flags]

Aliases:
  comb, combination

Flags:
  -h, --help          help for comb
  -i, --ignore-case   ignore-case
  -S, --nat-sort      sort items in natural order
  -n, --number int    number of items in a combination, 0 for no limit, i.e., return all combinations
                      (default 2)
  -s, --sort          sort items in a combination

</code></pre>
<p>Examples:</p>
<pre><code class="language-shell">$ cat players.csv 
gender,id,name
male,1,A
male,2,B
male,3,C
female,11,a
female,12,b
female,13,c
female,14,d

# put names of one group in one row
$ cat players.csv \
    | csvtk collapse -f 1 -v 3 -s ';' \
    | csvtk cut -f 2 
name
A;B;C
a;b;c;d

# n = 2
$ cat players.csv \
    | csvtk collapse -f 1 -v 3 -s ';' \
    | csvtk cut -f 2 \
    | csvtk comb -d ';' -n 2
A,B
A,C
B,C
a,b
a,c
b,c
a,d
b,d
c,d

# n = 3
$ cat players.csv \
    | csvtk collapse -f 1 -v 3 -s ';' \
    | csvtk cut -f 2 \
    | csvtk comb -d ';' -n 3
A,B,C
a,b,c
a,b,d
a,c,d
b,c,d

# n = 0
$ cat players.csv \
    | csvtk collapse -f 1 -v 3 -s ';' \
    | csvtk cut -f 2 \
    | csvtk comb -d ';' -n 0
A
B
A,B
C
A,C
B,C
A,B,C
a
b
a,b
c
a,c
b,c
a,b,c
d
a,d
b,d
a,b,d
c,d
a,c,d
b,c,d
a,b,c,d

</code></pre>
<h2 id="fix">fix</h2>
<p>Usage</p>
<pre><code class="language-text">fix CSV/TSV with different numbers of columns in rows

How to:
  1. First -n/--buf-rows rows are read to check the maximum number of columns.
     The default value 0 means all rows will be read.
  2. Buffered and remaining rows with fewer columns are appended with empty
     cells before output.
  3. An error will be reported if the number of columns of any remaining row
     is larger than the maximum number of columns.

Usage:
  csvtk fix [flags]

Flags:
  -n, --buf-rows int   the number of rows to determine the maximum number of columns. 0 for all rows.
  -h, --help           help for fix


</code></pre>
<p>Examples</p>
<pre><code>$ cat testdata/unequal_ncols.csv
id,first_name,last_name
11,&quot;Rob&quot;,&quot;Pike&quot;
2,Ken,Thompson
4,&quot;Robert&quot;,&quot;Griesemer&quot;,&quot;gri&quot;
1,&quot;Robert&quot;,&quot;Thompson&quot;,&quot;abc&quot;
NA,&quot;Robert&quot;


$ cat testdata/unequal_ncols.csv | csvtk pretty
[ERRO] record on line 4: wrong number of fields



$ cat testdata/unequal_ncols.csv | csvtk fix | csvtk pretty -S grid
[INFO] the maximum number of columns in all 6 rows: 4
+----+------------+-----------+-----+
| id | first_name | last_name |     |
+====+============+===========+=====+
| 11 | Rob        | Pike      |     |
+----+------------+-----------+-----+
| 2  | Ken        | Thompson  |     |
+----+------------+-----------+-----+
| 4  | Robert     | Griesemer | gri |
+----+------------+-----------+-----+
| 1  | Robert     | Thompson  | abc |
+----+------------+-----------+-----+
| NA | Robert     |           |     |
+----+------------+-----------+-----+

</code></pre>
<h2 id="fix-quotes">fix-quotes</h2>
<p>Usage</p>
<pre><code class="language-text">fix malformed CSV/TSV caused by double-quotes

This command fixes fields not appropriately enclosed by double-quotes
to meet the RFC4180 standard (https://rfc-editor.org/rfc/rfc4180.html).

When and how to:
  1. Values containing bare double quotes. e.g.,
       a,abc&quot; xyz,d
     Error information: bare &quot; in non-quoted-field.
     Fix: adding the flag -l/--lazy-quotes.
     Using this command:
       a,abc&quot; xyz,d   -&gt;   a,&quot;abc&quot;&quot; xyz&quot;,d
  2. Values with double quotes in the begining but not in the end. e.g.,
       a,&quot;abc&quot; xyz,d
     Error information: extraneous or missing &quot; in quoted-field.
     Using this command:
       a,&quot;abc&quot; xyz,d  -&gt;   a,&quot;&quot;&quot;abc&quot;&quot; xyz&quot;,d

Next:
  1. You can process the data without the flag -l/--lazy-quotes.
  2. Use 'csvtk del-quotes' if you want to restore the original format.

Limitation:
  1. Values containing line breaks are not supported.

Usage:
  csvtk fix-quotes [flags]

Flags:
  -b, --buffer-size string   size of buffer, supported unit: K, M, G. You need increase the value when
                             &quot;bufio.Scanner: token too long&quot; error reported (default &quot;1G&quot;)
  -h, --help                 help for fix-quotes

</code></pre>
<p>Examples:</p>
<ol>
<li>
<p>Test data, in which there are five cases with values containing double quotes.</p>
<pre><code>$ cat testdata/malformed.tsv
1       Cellvibrio      no quotes &amp; not tab
2       "Cellvibrio gilvus"     quotes can be removed
3       "quotes required"       quotes needed (with a tab in the cell)
4       fake" record    bare double-quote in non-quoted-field
5       "Cellvibrio" Winogradsky        only with doub-quote in the beginning
6       fake record2"   "only with doub-quote in the end"

$ cat testdata/malformed.tsv  | csvtk cut -f 1-
[ERRO] parse error on line 2, column 3: bare " in non-quoted-field

# -l does not work, and it's messed up.
$ cat testdata/malformed.tsv  | csvtk cut -f 1- -l
1       Cellvibrio      no quotes &amp; not tab
"2      ""Cellvibrio gilvus""   quotes can be removed"
"3      ""quotes        required""      quotes needed (with a tab in the cell)"
"4      fake"" record   bare double-quote in non-quoted-field"
"5      ""Cellvibrio"" Winogradsky      only with doub-quote in the beginning"
"6      fake record2""  ""only with doub-quote in the end"""
</code></pre>
</li>
<li>
<p>Fix it!!!</p>
<pre><code>$ cat testdata/malformed.tsv  | csvtk fix-quotes -t
1       Cellvibrio      no quotes &amp; not tab
2       "Cellvibrio gilvus"     quotes can be removed
3       "quotes required"       quotes needed (with a tab in the cell)
4       "fake"" record" bare double-quote in non-quoted-field
5       """Cellvibrio"" Winogradsky"    only with doub-quote in the beginning
6       "fake record2"""        "only with doub-quote in the end"

# pretty
$ cat testdata/malformed.tsv  | csvtk fix-quotes -t | csvtk pretty -Ht -S grid
+---+--------------------------+----------------------------------------+
| 1 | Cellvibrio               | no quotes &amp; not tab                    |
+---+--------------------------+----------------------------------------+
| 2 | Cellvibrio gilvus        | quotes can be removed                  |
+---+--------------------------+----------------------------------------+
| 3 | quotes required          | quotes needed (with a tab in the cell) |
+---+--------------------------+----------------------------------------+
| 4 | fake" record             | bare double-quote in non-quoted-field  |
+---+--------------------------+----------------------------------------+
| 5 | "Cellvibrio" Winogradsky | only with doub-quote in the beginning  |
+---+--------------------------+----------------------------------------+
| 6 | fake record2"            | only with doub-quote in the end        |
+---+--------------------------+----------------------------------------+

# do something, like searching rows containing double-quotes.
# since the command-line argument parser csvtk uses parse the value of flag -p
# as CSV data, we have to use -p '""""' to represents one double-quotes,
# where the outter two double quotes are used to quote the value,
# and the two inner double-quotes actually means an escaped double-quote
#
$ cat testdata/malformed.tsv  \
    | csvtk fix-quotes -t \
    | csvtk grep -Ht -f 2 -r -p '""""'
4       "fake"" record" bare double-quote in non-quoted-field
5       """Cellvibrio"" Winogradsky"    only with doub-quote in the beginning
6       "fake record2"""        only with doub-quote in the end
</code></pre>
</li>
<li>
<p>Note that fixed rows are different from the orginal ones, you can use <code>csvtk del-quotes</code> to reset them.</p>
<pre><code>$ cat testdata/malformed.tsv  \
    | csvtk fix-quotes -t \
    | csvtk filter2 -t -f '$1 &gt; 0' \
    | csvtk del-quotes -t
1       Cellvibrio      no quotes &amp; not tab
2       Cellvibrio gilvus       quotes can be removed
3       "quotes required"       quotes needed (with a tab in the cell)
4       fake" record    bare double-quote in non-quoted-field
5       "Cellvibrio" Winogradsky        only with doub-quote in the beginning
6       fake record2"   only with doub-quote in the end
</code></pre>
</li>
</ol>
<h2 id="del-quotes">del-quotes</h2>
<p>Usage</p>
<pre><code class="language-text">remove extra double quotes added by 'fix-quotes'

Limitation:
  1. Values containing line breaks are not supported.

Usage:
  csvtk del-quotes [flags]

Flags:
  -h, --help   help for del-quotes
</code></pre>
<p>Examples: see eamples of <a href="#fix-quotes">fix-quotes</a></p>
<h2 id="add-header">add-header</h2>
<p>Usage</p>
<pre><code class="language-text">add column names

Usage:
  csvtk add-header [flags]

Flags:
  -h, --help            help for add-header
  -n, --names strings   column names to add, in CSV format

</code></pre>
<p>Examples:</p>
<ol>
<li>
<p>No new colnames given:</p>
<pre><code>$ seq 3 | csvtk mutate -H \
    | csvtk add-header
[WARN] colnames not given, c1, c2, c3... will be used
c1,c2
1,1
2,2
3,3
</code></pre>
</li>
<li>
<p>Adding new colnames:</p>
<pre><code>$ seq 3 | csvtk mutate -H \
    | csvtk add-header -n a,b
a,b
1,1
2,2
3,3
$ seq 3 | csvtk mutate -H \
    | csvtk add-header -n a -n b
a,b
1,1
2,2
3,3

$ seq 3 | csvtk mutate -H -t \
    | csvtk add-header -t -n a,b
a       b
1       1
2       2
3       3
</code></pre>
</li>
</ol>
<h2 id="del-header">del-header</h2>
<p>Usage</p>
<pre><code class="language-text">delete column names

Attention:
  1. It delete the first lines of all input files.

Usage:
  csvtk del-header [flags]

Flags:
  -h, --help   help for del-header

</code></pre>
<p>Examples:</p>
<pre><code>$ seq 3 | csvtk add-header
c1
1
2
3

$ seq 3 | csvtk add-header | csvtk del-header
1
2
3

$ seq 3 | csvtk del-header -H
1
2
3
</code></pre>
<h2 id="rename">rename</h2>
<p>Usage</p>
<pre><code class="language-text">rename column names with new names

Usage:
  csvtk rename [flags]

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -n, --names string    comma separated new names

</code></pre>
<p>Examples:</p>
<ul>
<li>
<p>Setting new names: <code>csvtk rename -f A,B -n a,b</code> or <code>csvtk rename -f 1-3 -n a,b,c</code></p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/phones.csv \
    | csvtk rename -f 1-2 -n 姓名,电话 \
    | csvtk pretty 
姓名      电话
gri       11111
rob       12345
ken       22222
shenwei   999999
</code></pre>
</li>
<li>
<p>Also support any order</p>
<pre><code>$ cat testdata/phones.csv \
    | csvtk rename -f 2,1 -n 电话,姓名 \
    | csvtk pretty
姓名      电话
gri       11111
rob       12345
ken       22222
shenwei   999999
</code></pre>
</li>
</ul>
<h2 id="rename2">rename2</h2>
<p>Usage</p>
<pre><code class="language-text">rename column names by regular expression

Special replacement symbols:

  {nr}  ascending number, starting from --start-num
  {kv}  Corresponding value of the key (captured variable $n) by key-value file,
        n can be specified by flag --key-capt-idx (default: 1)

Usage:
  csvtk rename2 [flags]

Flags:
  -f, --fields string                       select only these fields. e.g -f 1,2 or -f columnA,columnB
  -F, --fuzzy-fields                        using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                                help for rename2
  -i, --ignore-case                         ignore case
  -K, --keep-key                            keep the key as value when no value found for the key
      --key-capt-idx int                    capture variable index of key (1-based) (default 1)
      --key-miss-repl string                replacement for key with no corresponding value
  -k, --kv-file string                      tab-delimited key-value file for replacing key with value
                                            when using &quot;{kv}&quot; in -r (--replacement)
  -A, --kv-file-all-left-columns-as-value   treat all columns except 1th one as value for kv-file with
                                            more than 2 columns
      --nr-width int                        minimum width for {nr} in flag -r/--replacement. e.g.,
                                            formating &quot;1&quot; to &quot;001&quot; by --nr-width 3 (default 1)
  -p, --pattern string                      search regular expression
  -r, --replacement string                  renamement. supporting capture variables.  e.g. $1
                                            represents the text of the first submatch. ATTENTION: use
                                            SINGLE quote NOT double quotes in *nix OS or use the \
                                            escape character. Ascending number is also supported by
                                            &quot;{nr}&quot;.use ${1} instead of $1 when {kv} given!
  -n, --start-num int                       starting number when using {nr} in replacement (default 1)

</code></pre>
<p>Examples:</p>
<ul>
<li>
<p>Add suffix to all column names.</p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/phones.csv \
    | csvtk rename2 -F -f "*" -p "(.*)" -r 'prefix_${1}_suffix'
prefix_username_suffix,prefix_phone_suffix
gri,11111
rob,12345
ken,22222
shenwei,999999
</code></pre>
</li>
<li>
<p>supporting <code>{kv}</code> and <code>{nr}</code> in <code>csvtk replace</code>. e.g., replace barcode with sample name.</p>
<pre><code>$ cat barcodes.tsv
Sample  Barcode
sc1     CCTAGATTAAT
sc2     GAAGACTTGGT
sc3     GAAGCAGTATG
sc4     GGTAACCTGAC
sc5     ATAGTTCTCGT

$ cat table.tsv
gene    ATAGTTCTCGT     GAAGCAGTATG     GAAGACTTGGT     AAAAAAAAAA
gene1   0       0       3       0
gen1e2  0       0       0       0

# note that, we must arrange the order of barcodes.tsv to KEY-VALUE
$ csvtk cut -t -f 2,1 barcodes.tsv
Barcode Sample
CCTAGATTAAT     sc1
GAAGACTTGGT     sc2
GAAGCAGTATG     sc3
GGTAACCTGAC     sc4
ATAGTTCTCGT     sc5

# here we go!!!!

$ csvtk rename2 -t -k &lt;(csvtk cut -t -f 2,1 barcodes.tsv) \
    -f -1 -p '(.+)' -r '{kv}' --key-miss-repl unknown table.tsv
gene    sc5     sc3     sc2     unknown
gene1   0       0       3       0
gen1e2  0       0       0       0
</code></pre>
</li>
<li>
<p><code>{nr}</code>, incase you need this</p>
<pre><code>$ echo "a,b,c,d" \
    | csvtk rename2  -p '(.+)' -r 'col_{nr}' -f -1 --start-num 2
a,col_2,col_3,col_4
</code></pre>
</li>
</ul>
<h2 id="replace">replace</h2>
<p>Usage</p>
<pre><code class="language-text">replace data of selected fields by regular expression

Note that the replacement supports capture variables.
e.g. $1 represents the text of the first submatch.
ATTENTION: use SINGLE quote NOT double quotes in *nix OS.

Examples: Adding space to cell values.

  csvtk replace -p &quot;(.)&quot; -r '$1 '

Or use the \ escape character.

  csvtk replace -p &quot;(.)&quot; -r &quot;\$1 &quot;

more on: http://shenwei356.github.io/csvtk/usage/#replace

Special replacement symbols:

  {nr}    Record number, starting from 1
  {kv}    Corresponding value of the key (captured variable $n) by key-value file,
          n can be specified by flag --key-capt-idx (default: 1)

Usage:
  csvtk replace [flags]

Flags:
  -f, --fields string                       select only these fields. e.g -f 1,2 or -f columnA,columnB
                                            (default &quot;1&quot;)
  -F, --fuzzy-fields                        using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                                help for replace
  -i, --ignore-case                         ignore case
  -K, --keep-key                            keep the key as value when no value found for the key
      --key-capt-idx int                    capture variable index of key (1-based) (default 1)
      --key-miss-repl string                replacement for key with no corresponding value
  -k, --kv-file string                      tab-delimited key-value file for replacing key with value
                                            when using &quot;{kv}&quot; in -r (--replacement)
  -A, --kv-file-all-left-columns-as-value   treat all columns except 1th one as value for kv-file with
                                            more than 2 columns
      --nr-width int                        minimum width for {nr} in flag -r/--replacement. e.g.,
                                            formating &quot;1&quot; to &quot;001&quot; by --nr-width 3 (default 1)
  -p, --pattern string                      search regular expression
  -r, --replacement string                  replacement. supporting capture variables.  e.g. $1
                                            represents the text of the first submatch. ATTENTION: for
                                            *nix OS, use SINGLE quote NOT double quotes or use the \
                                            escape character. Record number is also supported by
                                            &quot;{nr}&quot;.use ${1} instead of $1 when {kv} given!
</code></pre>
<p>Examples</p>
<ul>
<li>
<p>remove Chinese charactors</p>
<pre><code>$ csvtk replace -F -f "*_name" -p "\p{Han}+" -r ""
</code></pre>
</li>
<li>
<p>replace by key-value files</p>
<pre><code>$ cat data.tsv
name    id
A       ID001
B       ID002
C       ID004

$ cat alias.tsv
001     Tom
002     Bob
003     Jim

$ csvtk replace -t -f 2  -p "ID(.+)" -r "N: {nr}, alias: {kv}" -k alias.tsv  data.tsv
[INFO] read key-value file: alias.tsv
[INFO] 3 pairs of key-value loaded
name    id
A       N: 1, alias: Tom
B       N: 2, alias: Bob
C       N: 3, alias
</code></pre>
</li>
</ul>
<h2 id="round">round</h2>
<p>Usage</p>
<pre><code class="language-text">round float to n decimal places

Usage:
  csvtk round [flags]

Flags:
  -a, --all-fields          all fields, overides -f/--fields
  -n, --decimal-width int   limit floats to N decimal points (default 2)
  -f, --fields string       select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields        using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help                help for round

</code></pre>
<p>Examples:</p>
<pre><code>$ cat testdata/floats.csv  | csvtk pretty
a                        b
0.12345                  abc
NA                       0.9999198549640733
12.3                     e3
1.4814505299984235e-05   -3.1415926E05

# one or more fields
$ cat testdata/floats.csv | csvtk round -n 2 -f b | csvtk pretty 
a                        b
0.12345                  abc
NA                       1.00
12.3                     e3
1.4814505299984235e-05   -3.14E05

# all fields
$ cat testdata/floats.csv | csvtk round -n 2 -a | csvtk pretty 
a          b
0.12       abc
NA         1.00
12.30      e3
1.48e-05   -3.14E05
</code></pre>
<h2 id="comma">comma</h2>
<p>Usage</p>
<pre><code class="language-text">make numbers more readable by adding commas

Usage:
  csvtk comma [flags] 

Flags:
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help            help for comma
</code></pre>
<p>Example</p>
<pre><code>$ echo -ne &quot;12345\nNA\n12345.12\n1.2e6\n&quot; \
  | csvtk mutate -Ht | csvtk pretty -Ht
12345      12345   
NA         NA      
12345.12   12345.12
1.2e6      1.2e6

$ echo -ne &quot;12345\nNA\n12345.12\n1.2e6\n&quot; \
  | csvtk mutate -Ht \
  | csvtk comma -Ht -f 1- \
  | csvtk pretty -Ht
12,345      12,345   
NA          NA       
12,345.12   12,345.12
1,200,000   1,200,000
</code></pre>
<h2 id="mutate">mutate</h2>
<p>Usage</p>
<pre><code class="language-text">create a new column from selected fields by regular expression

Usage:
  csvtk mutate [flags]

Flags:
      --after string     insert the new column right after the given column name
      --at int           where the new column should appear, 1 for the 1st column, 0 for the last column
      --before string    insert the new column right before the given column name
  -f, --fields string    select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -i, --ignore-case      ignore case
      --na               for unmatched data, use blank instead of original data
  -n, --name string      new column name
  -p, --pattern string   search regular expression with capture bracket. e.g. (default &quot;^(.+)$&quot;)

</code></pre>
<p>Examples</p>
<ul>
<li>
<p>By default, copy a column: <code>csvtk mutate -f id -n newname</code></p>
</li>
<li>
<p>Extract prefix of data as group name using regular expression (get "A" from "A.1" as group name):</p>
<pre><code>csvtk mutate -f sample -n group -p "^(.+?)\."
</code></pre>
</li>
<li>
<p>get the first letter as new column</p>
<pre><code>$ cat testdata/phones.csv
username,phone
gri,11111
rob,12345
ken,22222
shenwei,999999

$ cat testdata/phones.csv \
    | csvtk mutate -f username -p "^(\w)" -n first_letter
username,phone,first_letter
gri,11111,g
rob,12345,r
ken,22222,k
shenwei,999999,s
</code></pre>
</li>
<li>
<p>specify the position of the new column (see similar examples of <code>csvtk mutate2</code>)</p>
<pre><code>$ cat testdata/phones.csv \
    | csvtk mutate -f username -p "^(\w)" -n first_letter  --at 2
username,first_letter,phone
gri,g,11111
rob,r,12345
ken,k,22222
shenwei,s,999999

$ cat testdata/phones.csv \
    | csvtk mutate -f username -p "^(\w)" -n first_letter  --after username
username,first_letter,phone
gri,g,11111
rob,r,12345
ken,k,22222
shenwei,s,999999

$ cat testdata/phones.csv \
    | csvtk mutate -f username -p "^(\w)" -n first_letter  --before username
first_letter,username,phone
g,gri,11111
r,rob,12345
k,ken,22222
s,shenwei,99999
</code></pre>
</li>
</ul>
<h2 id="mutate2">mutate2</h2>
<p>Usage</p>
<pre><code class="language-text">create a new column from selected fields by awk-like arithmetic/string expressions

The arithmetic/string expression is supported by:

  https://github.com/Knetic/govaluate

Variables formats:
  $1 or ${1}                        The first field/column
  $a or ${a}                        Column &quot;a&quot;
  ${a,b} or ${a b} or ${a (b)}      Column name with special charactors,
                                    e.g., commas, spaces, and parentheses

Supported operators and types:

  Modifiers: + - / * &amp; | ^ ** % &gt;&gt; &lt;&lt;
  Comparators: &gt; &gt;= &lt; &lt;= == != =~ !~
  Logical ops: || &amp;&amp;
  Numeric constants, as 64-bit floating point (12345.678)
  String constants (single quotes: 'foobar')
  Date constants (single quotes)
  Boolean constants: true false
  Parenthesis to control order of evaluation ( )
  Arrays (anything separated by , within parenthesis: (1, 2, 'foo'))
  Prefixes: ! - ~
  Ternary conditional: ? :
  Null coalescence: ??

Custom functions:
  - len(), length of strings, e.g., len($1), len($a), len($1, $2)
  - ulen(), length of unicode strings/width of unicode strings rendered
    to a terminal, e.g., len(&quot;沈伟&quot;)==6, ulen(&quot;沈伟&quot;)==4

Usage:
  csvtk mutate2 [flags]

Flags:
      --after string        insert the new column right after the given column name
      --at int              where the new column should appear, 1 for the 1st column, 0 for the last column
      --before string       insert the new column right before the given column name
  -w, --decimal-width int   limit floats to N decimal points (default 2)
  -e, --expression string   arithmetic/string expressions. e.g. &quot;'string'&quot;, '&quot;abc&quot;', ' $a + &quot;-&quot; + $b ',
                            '$1 + $2', '$a / $b', ' $1 &gt; 100 ? &quot;big&quot; : &quot;small&quot; '
  -h, --help                help for mutate2
  -n, --name string         new column name
  -s, --numeric-as-string   treat even numeric fields as strings to avoid converting big numbers into
                            scientific notation

</code></pre>
<p>Example</p>
<ol>
<li>
<p>Constants</p>
<pre><code>$ cat testdata/digitals.tsv \
    | csvtk mutate2 -t -H -e " 'abc' "
4       5       6       abc
1       2       3       abc
7       8       0       abc
8       1,000   4       abc

$ val=123 \
    &amp;&amp; cat testdata/digitals.tsv \
    | csvtk mutate2 -t -H -e " $val "
4       5       6       123
1       2       3       123
7       8       0       123
8       1,000   4       123
</code></pre>
</li>
<li>
<p>String concatenation</p>
<pre><code>$ cat testdata/names.csv  \
    | csvtk mutate2 -n full_name -e ' $first_name + " " + $last_name ' \
    | csvtk pretty
id   first_name   last_name   username   full_name
11   Rob          Pike        rob        Rob Pike
2    Ken          Thompson    ken        Ken Thompson
4    Robert       Griesemer   gri        Robert Griesemer
1    Robert       Thompson    abc        Robert Thompson
NA   Robert       Abel        123        Robert Abel
</code></pre>
</li>
<li>
<p>Math</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate2 -t -H -e '$1 + $3' -w 0
4       5       6       10
1       2       3       4
7       8       0       7
8       1,000   4       12
</code></pre>
</li>
<li>
<p>Bool</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate2 -t -H -e '$1 &gt; 5'
4       5       6       false
1       2       3       false
7       8       0       true
8       1,000   4       true
</code></pre>
</li>
<li>
<p>Ternary condition (<code>? :</code>)</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate2 -t -H -e '$1 &gt; 5 ? "big" : "small" '
4       5       6       small
1       2       3       small
7       8       0       big
8       1,000   4       big
</code></pre>
</li>
<li>
<p>Null coalescence (<code>??</code>)</p>
<pre><code>$ echo -e "one,two\na1,a2\n,b2\na2," | csvtk pretty 
one   two
---   ---
a1    a2
      b2
a2

$ echo -e "one,two\na1,a2\n,b2\na2," \
    | csvtk mutate2 -n three -e '$one ?? $two' \
    | csvtk pretty
one   two   three
---   ---   -----
a1    a2    a1
      b2    b2
a2          a2
</code></pre>
</li>
<li>
<p>Specify the position of the new column</p>
<pre><code>$ echo -ne "a,b,c\n1,2,3\n"
a,b,c
1,2,3

# in the end (default)
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate2 -e '$a+$c' -n x -w 0
a,b,c,x
1,2,3,4

# in the beginning
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate2 -e '$a+$c' -n x -w 0 --at 1
x,a,b,c
4,1,2,3

# at another position
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate2 -e '$a+$c' -n x -w 0 --at 3
a,b,x,c
1,2,4,3

# right after the given column name
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate2 -e '$a+$c' -n x -w 0 --after a
a,x,b,c
1,4,2,3

# right before the given column name
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate2 -e '$a+$c' -n x -w 0 --before c
a,b,x,c
1,2,4,3
</code></pre>
</li>
</ol>
<h2 id="mutate3">mutate3</h2>
<p>Usage</p>
<pre><code class="language-text">create a new column from selected fields with Go-like expressions

The expression language is supported by Expr:

  https://expr-lang.org/docs/language-definition

Variables formats:
  $1 or ${1}                        The first field/column
  $a or ${a}                        Column &quot;a&quot;
  ${a,b} or ${a b} or ${a (b)}      Column name with special charactors,
                                    e.g., commas, spaces, and parentheses

Supported Operators:

  Arithmetic: + - / * ^ ** %
  Comparison: &gt; &gt;= &lt; &lt;= == !=
  Logical: not ! and &amp;&amp; or ||
  String: + contains startsWith endsWith
  Regex: matches
  Range: ..
  Slice: [:]
  Pipe: |
  Ternary conditional: ? :
  Null coalescence: ??

Supported Literals:

  Arrays: [1, 2, 3]
  Boolean: true false
  Float: 0.5 .5
  Integer: 42 0x2A 0o52 0b101010
  Map: {a: 1, b: 2}
  Null: nil
  String: &quot;foo&quot; 'bar'

See Expr language definition link for documentation on built-in functions.

Custom functions:
  - ulen(), length of unicode strings/width of unicode strings rendered
    to a terminal, e.g., len(&quot;沈伟&quot;)==6, ulen(&quot;沈伟&quot;)==4

Usage:
  csvtk mutate3 [flags]

Flags:
      --after string        insert the new column right after the given column name
      --at int              where the new column should appear, 1 for the 1st column, 0 for the last column
      --before string       insert the new column right before the given column name
  -w, --decimal-width int   limit floats to N decimal points (default 2)
  -e, --expression string   arithmetic/string expressions. e.g. &quot;'string'&quot;, '&quot;abc&quot;', ' $a + &quot;-&quot; + $b ',
                            '$1 + $2', '$a / $b', ' $1 &gt; 100 ? &quot;big&quot; : &quot;small&quot; '
  -h, --help                help for mutate3
  -n, --name string         new column name
  -s, --numeric-as-string   treat even numeric fields as strings to avoid converting big numbers into
                            scientific notation
</code></pre>
<p>Examples</p>
<ol>
<li>
<p>Constants</p>
<pre><code>$ cat testdata/digitals.tsv \
    | csvtk mutate3 -t -H -e " 'abc' "
4       5       6       abc
1       2       3       abc
7       8       0       abc
8       1,000   4       abc

$ val=123 \
    &amp;&amp; cat testdata/digitals.tsv \
    | csvtk mutate3 -t -H -e " $val "
4       5       6       123
1       2       3       123
7       8       0       123
8       1,000   4       123
</code></pre>
</li>
<li>
<p>String concatenation</p>
<pre><code>$ cat testdata/names.csv  \
    | csvtk mutate3 -n full_name -e ' $first_name + " " + $last_name ' \
    | csvtk pretty
id   first_name   last_name   username   full_name
11   Rob          Pike        rob        Rob Pike
2    Ken          Thompson    ken        Ken Thompson
4    Robert       Griesemer   gri        Robert Griesemer
1    Robert       Thompson    abc        Robert Thompson
NA   Robert       Abel        123        Robert Abel
</code></pre>
</li>
<li>
<p>Math</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate3 -t -H -e '$1 + $3' -w 0
4       5       6       10
1       2       3       4
7       8       0       7
8       1,000   4       12
</code></pre>
</li>
<li>
<p>Bool</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate3 -t -H -e '$1 &gt; 5'
4       5       6       false
1       2       3       false
7       8       0       true
8       1,000   4       true
</code></pre>
</li>
<li>
<p>Ternary condition (<code>? :</code>)</p>
<pre><code>$ cat testdata/digitals.tsv | csvtk mutate3 -t -H -e '$1 &gt; 5 ? "big" : "small" '
4       5       6       small
1       2       3       small
7       8       0       big
8       1,000   4       big
</code></pre>
</li>
<li>
<p>Null coalescence (<code>??</code>)</p>
<pre><code>$ echo -e "one,two\na1,a2\n,b2\na2," | csvtk pretty
one   two
---   ---
a1    a2
      b2
a2

$ echo -e "one,two\na1,a2\n,b2\na2," \
    | csvtk mutate3 -n three -e '$one ?? $two' \
    | csvtk pretty
one   two   three
---   ---   -----
a1    a2    a1
      b2    b2
a2          a2
</code></pre>
</li>
<li>
<p>Specify the position of the new column</p>
<pre><code>$ echo -ne "a,b,c\n1,2,3\n"
a,b,c
1,2,3

# in the end (default)
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate3 -e '$a+$c' -n x -w 0
a,b,c,x
1,2,3,4

# in the beginning
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate3 -e '$a+$c' -n x -w 0 --at 1
x,a,b,c
4,1,2,3

# at another position
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate3 -e '$a+$c' -n x -w 0 --at 3
a,b,x,c
1,2,4,3

# right after the given column name
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate3 -e '$a+$c' -n x -w 0 --after a
a,x,b,c
1,4,2,3

# right before the given column name
$ echo -ne "a,b,c\n1,2,3\n" | csvtk mutate3 -e '$a+$c' -n x -w 0 --before c
a,b,x,c
1,2,4,3
</code></pre>
</li>
</ol>
<h2 id="sep">sep</h2>
<p>Usage</p>
<pre><code class="language-text">separate column into multiple columns

Usage:
  csvtk sep [flags]

Flags:
      --drop            drop extra data, exclusive with --merge
  -f, --fields string   select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -h, --help            help for sep
  -i, --ignore-case     ignore case
      --merge           only splits at most N times, exclusive with --drop
      --na string       content for filling NA data
  -n, --names strings   new column names
  -N, --num-cols int    preset number of new created columns
  -R, --remove          remove input column
  -s, --sep string      separator
  -r, --use-regexp      separator is a regular expression
</code></pre>
<p>Examples:</p>
<pre><code class="language-shell">$ cat players.csv | csvtk collapse -f 1 -v 3 -s ';'
gender,name
male,A;B;C
female,a;b;c;d

# set number of new columns as 3.
$ cat players.csv | csvtk collapse -f 1 -v 3 -s ';' \
    | csvtk sep -f 2 -s ';' -n p1,p2,p3,p4 -N 4 --na NA \
    | csvtk pretty
gender   name      p1   p2   p3   p4
------   -------   --   --   --   --
male     A;B;C     A    B    C    NA
female   a;b;c;d   a    b    c    d

# set number of new columns as 3, drop extra values 
$ cat players.csv | csvtk collapse -f 1 -v 3 -s ';' \
    | csvtk sep -f 2 -s ';' -n p1,p2,p3  --drop \
    | csvtk pretty
gender   name      p1   p2   p3
------   -------   --   --   --
male     A;B;C     A    B    C
female   a;b;c;d   a    b    c

# set number of new columns as 3, split as most 3 parts
$ cat players.csv | csvtk collapse -f 1 -v 3 -s ';' \
    | csvtk sep -f 2 -s ';' -n p1,p2,p3  --merge \
    | csvtk pretty
gender   name      p1   p2   p3
------   -------   --   --   ---
male     A;B;C     A    B    C
female   a;b;c;d   a    b    c;

#
$ echo -ne &quot;taxid\tlineage\n9606\tEukaryota;Chordata;Mammalia;Primates;Hominidae;Homo;Homo sapiens\n&quot;
taxid   lineage
9606    Eukaryota;Chordata;Mammalia;Primates;Hominidae;Homo;Homo sapiens

$ echo -ne &quot;taxid\tlineage\n9606\tEukaryota;Chordata;Mammalia;Primates;Hominidae;Homo;Homo sapiens\n&quot; \
    | csvtk sep -t -f 2 -s ';' -n kindom,phylum,class,order,family,genus,species --remove \
    | csvtk pretty -t
taxid   kindom      phylum     class      order      family      genus   species
-----   ---------   --------   --------   --------   ---------   -----   ------------
9606    Eukaryota   Chordata   Mammalia   Primates   Hominidae   Homo    Homo sapiens
</code></pre>
<h2 id="gather">gather</h2>
<p>Usage</p>
<pre><code class="language-text">gather columns into key-value pairs, like tidyr::gather/pivot_longer

Usage:
  csvtk gather [flags]

Aliases:
  gather, longer

Flags:
  -f, --fields string   fields for gathering. e.g -f 1,2 or -f columnA,columnB, or -f -columnA for
                        unselect columnA
  -F, --fuzzy-fields    using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help            help for longer
  -k, --key string      name of key column to create in output
  -v, --value string    name of value column to create in outpu

</code></pre>
<p>Examples:</p>
<pre><code>$ cat testdata/names.csv | csvtk pretty -S simple
----------------------------------------
id   first_name   last_name   username
----------------------------------------
11   Rob          Pike        rob
2    Ken          Thompson    ken
4    Robert       Griesemer   gri
1    Robert       Thompson    abc
NA   Robert       Abel        123
----------------------------------------

$ cat testdata/names.csv \
    | csvtk gather -k item -v value -f -1 \
    | csvtk pretty -S simple
-----------------------------
id   item         value
-----------------------------
11   first_name   Rob
11   last_name    Pike
11   username     rob
2    first_name   Ken
2    last_name    Thompson
2    username     ken
4    first_name   Robert
4    last_name    Griesemer
4    username     gri
1    first_name   Robert
1    last_name    Thompson
1    username     abc
NA   first_name   Robert
NA   last_name    Abel
NA   username     123
-----------------------------
</code></pre>
<h2 id="spread">spread</h2>
<p>Usage</p>
<pre><code class="language-text">spread a key-value pair across multiple columns, like tidyr::spread/pivot_wider

Usage:
  csvtk spread [flags]

Aliases:
  spread, wider, scatter

Flags:
  -h, --help               help for spread
  -k, --key string         field of the key. e.g -k 1 or -k columnA
      --na string          content for filling NA data
  -s, --separater string   separater for values that share the same key (default &quot;; &quot;)
  -v, --value string       field of the value. e.g -v 1 or -v columnA

</code></pre>
<p>Examples:</p>
<p>Shuffled columns:</p>
<pre><code>$ csvtk cut -f 1,4,2,3 testdata/names.csv \
  | csvtk pretty -S simple
----------------------------------------
id   username   first_name   last_name
----------------------------------------
11   rob        Rob          Pike
2    ken        Ken          Thompson
4    gri        Robert       Griesemer
1    abc        Robert       Thompson
NA   123        Robert       Abel
----------------------------------------
</code></pre>
<p>data -&gt; gather/longer -&gt;  spread/wider. Note that the orders of both rows and columns are kept :)</p>
<pre><code>$ csvtk cut -f 1,4,2,3 testdata/names.csv \
    | csvtk gather -k item -v value -f -1 \
    | csvtk spread -k item -v value \
    | csvtk pretty -S simple
----------------------------------------
id   username   first_name   last_name
----------------------------------------
11   rob        Rob          Pike
2    ken        Ken          Thompson
4    gri        Robert       Griesemer
1    abc        Robert       Thompson
NA   123        Robert       Abel
----------------------------------------
</code></pre>
<p>No header rows</p>
<pre><code>$ echo -ne "a,a,0\nb,b,0\nc,c,0\na,b,1\na,c,2\nb,c,3\n"
a,a,0
b,b,0
c,c,0
a,b,1
a,c,2
b,c,3

$ echo -ne "a,a,0\nb,b,0\nc,c,0\na,b,1\na,c,2\nb,c,3\n" \
  | csvtk spread -H -k 2 -v 3 \
  | csvtk pretty -S bold
┏━━━┳━━━┳━━━┳━━━┓
┃   ┃ a ┃ b ┃ c ┃
┣━━━╋━━━╋━━━╋━━━┫
┃ a ┃ 0 ┃ 1 ┃ 2 ┃
┣━━━╋━━━╋━━━╋━━━┫
┃ b ┃   ┃ 0 ┃ 3 ┃
┣━━━╋━━━╋━━━╋━━━┫
┃ c ┃   ┃   ┃ 0 ┃
┗━━━┻━━━┻━━━┻━━━┛
</code></pre>
<h2 id="unfold">unfold</h2>
<p>Usage</p>
<pre><code class="language-text">unfold multiple values in cells of a field

Example:

    $ echo -ne &quot;id,values,meta\n1,a;b,12\n2,c,23\n3,d;e;f,34\n&quot; \
        | csvtk pretty
    id   values   meta
    1    a;b      12
    2    c        23
    3    d;e;f    34


    $ echo -ne &quot;id,values,meta\n1,a;b,12\n2,c,23\n3,d;e;f,34\n&quot; \
        | csvtk unfold -f values -s &quot;;&quot; \
        | csvtk pretty
    id   values   meta
    1    a        12
    1    b        12
    2    c        23
    3    d        34
    3    e        34
    3    f        34

Usage:
  csvtk unfold [flags]

Flags:
  -f, --fields string      field to expand, only one field is allowed. type &quot;csvtk unfold -h&quot; for examples
  -h, --help               help for unfold
  -s, --separater string   separater for folded values (default &quot;; &quot;)
</code></pre>
<h2 id="fold">fold</h2>
<p>Usage</p>
<pre><code class="language-text">fold multiple values of a field into cells of groups

Attention:

    Only grouping fields and value filed are outputted.

Example:

    $ echo -ne &quot;id,value,meta\n1,a,12\n1,b,34\n2,c,56\n2,d,78\n&quot; \
        | csvtk pretty
    id   value   meta
    1    a       12
    1    b       34
    2    c       56
    2    d       78

    $ echo -ne &quot;id,value,meta\n1,a,12\n1,b,34\n2,c,56\n2,d,78\n&quot; \
        | csvtk fold -f id -v value -s &quot;;&quot; \
        | csvtk pretty
    id   value
    1    a;b
    2    c;d

    $ echo -ne &quot;id,value,meta\n1,a,12\n1,b,34\n2,c,56\n2,d,78\n&quot; \
        | csvtk fold -f id -v value -s &quot;;&quot; \
        | csvtk unfold -f value -s &quot;;&quot; \
        | csvtk pretty
    id   value
    1    a
    1    b
    2    c
    2    d

Usage:
  csvtk fold [flags]

Aliases:
  fold, collapse

Flags:
  -f, --fields string      key fields for grouping. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
  -F, --fuzzy-fields       using fuzzy fields (only for key fields), e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help               help for fold
  -i, --ignore-case        ignore case
  -s, --separater string   separater for folded values (default &quot;; &quot;)
  -v, --vfield string      value field for folding


</code></pre>
<p>examples</p>
<ol>
<li>
<p>data</p>
<pre><code>$ csvtk pretty teachers.csv
lab                     teacher   class
computational biology   Tom       Bioinformatics
computational biology   Tom       Statistics
computational biology   Rob       Bioinformatics
sequencing center       Jerry     Bioinformatics
sequencing center       Nick      Molecular Biology
sequencing center       Nick      Microbiology
</code></pre>
</li>
<li>
<p>List teachers for every lab/class. <code>uniq</code> is used to deduplicate items.</p>
<pre><code>$ cat teachers.csv  \
    | csvtk uniq -f lab,teacher  \
    | csvtk fold -f lab -v teacher \
    | csvtk pretty

lab                     teacher
computational biology   Tom; Rob
sequencing center       Jerry; Nick

$ cat teachers.csv  \
    | csvtk uniq -f class,teacher  \
    | csvtk fold -f class -v teacher -s ", " \
    | csvtk pretty

class               teacher
Statistics          Tom
Bioinformatics      Tom, Rob, Jerry
Molecular Biology   Nick
Microbiology        Nick
</code></pre>
</li>
<li>
<p>Multiple key fields supported</p>
<pre><code>$ cat teachers.csv  \
    | csvtk fold -f teacher,lab -v class \
    | csvtk pretty

teacher   lab                     class
Tom       computational biology   Bioinformatics; Statistics
Rob       computational biology   Bioinformatics
Jerry     sequencing center       Bioinformatics
Nick      sequencing center       Molecular Biology; Microbiology
</code></pre>
</li>
</ol>
<h2 id="fmtdate">fmtdate</h2>
<p>Usage</p>
<pre><code class="language-text">format date of selected fields

Date parsing is supported by: https://github.com/araddon/dateparse
Date formating is supported by: https://github.com/metakeule/fmtdate

Time zones:
    format: Asia/Shanghai
    whole list: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones

Output format is in MS Excel (TM) syntax.
Placeholders:

    M    - month (1)
    MM   - month (01)
    MMM  - month (Jan)
    MMMM - month (January)
    D    - day (2)
    DD   - day (02)
    DDD  - day (Mon)
    DDDD - day (Monday)
    YY   - year (06)
    YYYY - year (2006)
    hh   - hours (15)
    mm   - minutes (04)
    ss   - seconds (05)

    AM/PM hours: 'h' followed by optional 'mm' and 'ss' followed by 'pm', e.g.

    hpm        - hours (03PM)
    h:mmpm     - hours:minutes (03:04PM)
    h:mm:sspm  - hours:minutes:seconds (03:04:05PM)

    Time zones: a time format followed by 'ZZZZ', 'ZZZ' or 'ZZ', e.g.

    hh:mm:ss ZZZZ (16:05:06 +0100)
    hh:mm:ss ZZZ  (16:05:06 CET)
    hh:mm:ss ZZ   (16:05:06 +01:00)

Usage:
  csvtk fmtdate [flags]

Flags:
  -f, --fields string      select only these fields. e.g -f 1,2 or -f columnA,columnB (default &quot;1&quot;)
      --format string      output date format in MS Excel (TM) syntax, type &quot;csvtk fmtdate -h&quot; for
                           details (default &quot;YYYY-MM-DD hh:mm:ss&quot;)
  -F, --fuzzy-fields       using fuzzy fields, e.g., -F -f &quot;*name&quot; or -F -f &quot;id123*&quot;
  -h, --help               help for fmtdate
  -k, --keep-unparsed      keep the key as value when no value found for the key
  -z, --time-zone string   timezone aka &quot;Asia/Shanghai&quot; or &quot;America/Los_Angeles&quot; formatted time-zone,
                           type &quot;csvtk fmtdate -h&quot; for details

</code></pre>
<p>Examples</p>
<pre><code>$ csvtk xlsx2csv date.xlsx | csvtk pretty 
data                  value
-------------------   -----
2021-08-25 11:24:21   1
08/25/21 11:24 p8     2
NA                    3
                      4

$ csvtk xlsx2csv date.xlsx  \
    | csvtk fmtdate --format &quot;YYYY-MM-DD hh:mm:ss&quot; \
    | csvtk pretty 
data                  value
-------------------   -----
2021-08-25 11:24:21   1
2021-08-25 11:24:00   2
                      3
                      4

$ csvtk xlsx2csv date.xlsx  \
    | csvtk fmtdate --format &quot;YYYY-MM-DD hh:mm:ss&quot; -k \
    | csvtk pretty 
data                  value
-------------------   -----
2021-08-25 11:24:21   1
2021-08-25 11:24:00   2
NA                    3
                      4
</code></pre>
<h2 id="sort">sort</h2>
<p>Usage</p>
<pre><code class="language-text">sort by selected fields

Usage:
  csvtk sort [flags]

Flags:
  -h, --help             help for sort
  -i, --ignore-case      ignore-case
  -k, --keys strings     keys (multiple values supported). sort type supported, &quot;N&quot; for natural order,
                         &quot;n&quot; for number, &quot;u&quot; for user-defined order and &quot;r&quot; for reverse. e.g., &quot;-k 1&quot; or
                         &quot;-k A:r&quot; or &quot;&quot;-k 1:nr -k 2&quot; (default [1])
  -L, --levels strings   user-defined level file (one level per line, multiple values supported).
                         format: &lt;field&gt;:&lt;level-file&gt;.  e.g., &quot;-k name:u -L name:level.txt
</code></pre>
<p>Examples</p>
<ul>
<li>
<p>data</p>
<pre><code>$ cat testdata/names.csv
id,first_name,last_name,username
11,"Rob","Pike",rob
2,Ken,Thompson,ken
4,"Robert","Griesemer","gri"
1,"Robert","Thompson","abc"
NA,"Robert","Abel","123"
</code></pre>
</li>
<li>
<p>By single column : <code>csvtk sort -k 1</code> or <code>csvtk sort -k last_name</code></p>
<ul>
<li>
<p>in alphabetical order</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk sort -k first_name
id,first_name,last_name,username
2,Ken,Thompson,ken
11,Rob,Pike,rob
NA,Robert,Abel,123
1,Robert,Thompson,abc
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>in reversed alphabetical order (<code>key:r</code>)</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk sort -k first_name:r
id,first_name,last_name,username
NA,Robert,Abel,123
1,Robert,Thompson,abc
4,Robert,Griesemer,gri
11,Rob,Pike,rob
2,Ken,Thompson,ken
</code></pre>
</li>
<li>
<p>in numerical order (<code>key:n</code>)</p>
<pre><code>$ cat testdata/names.csv \
    | csvtk sort -k id:n
id,first_name,last_name,username
NA,Robert,Abel,123
1,Robert,Thompson,abc
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
11,Rob,Pike,rob
</code></pre>
</li>
<li>
<p>in natural order (<code>key:N</code>)</p>
<pre><code>$ cat testdata/names.csv | csvtk sort -k id:N
id,first_name,last_name,username
1,Robert,Thompson,abc
2,Ken,Thompson,ken
4,Robert,Griesemer,gri
11,Rob,Pike,rob
NA,Robert,Abel,123
</code></pre>
</li>
<li>
<p>in natural order (<code>key:N</code>), a bioinformatics example</p>
<pre><code>$ echo "X,Y,1,10,2,M,11,1_c,Un_g,1_g" | csvtk transpose 
X
Y
1
10
2
M
11
1_c
Un_g
1_g

$ echo "X,Y,1,10,2,M,11,1_c,Un_g,1_g" \
    | csvtk transpose \
    | csvtk sort -H -k 1:N
1
1_c
1_g
2
10
11
M
Un_g
X
Y
</code></pre>
</li>
</ul>
</li>
<li>
<p>By multiple columns: <code>csvtk sort -k 1,2</code> or <code>csvtk sort -k 1 -k 2</code> or <code>csvtk sort -k last_name,age</code></p>
<pre><code># by first_name and then last_name
$ cat testdata/names.csv | csvtk sort -k first_name -k last_name
id,first_name,last_name,username
2,Ken,Thompson,ken
11,Rob,Pike,rob
NA,Robert,Abel,123
4,Robert,Griesemer,gri
1,Robert,Thompson,abc

# by first_name and then ID
$ cat testdata/names.csv | csvtk sort -k first_name -k id:n
id,first_name,last_name,username
2,Ken,Thompson,ken
11,Rob,Pike,rob
NA,Robert,Abel,123
1,Robert,Thompson,abc
4,Robert,Griesemer,gri
</code></pre>
</li>
<li>
<p>By <strong><em>user-defined order</em></strong></p>
<pre><code># user-defined order/level
$ cat testdata/size_level.txt
tiny
mini
small
medium
big

# original data
$ cat testdata/size.csv
id,size
1,Huge
2,Tiny
3,Big
4,Small
5,Medium

$ csvtk sort -k 2:u -i -L 2:testdata/size_level.txt testdata/size.csv
id,size
2,Tiny
4,Small
5,Medium
3,Big
1,Huge
</code></pre>
</li>
</ul>
<h2 id="plot">plot</h2>
<p>Usage</p>
<pre><code class="language-text">plot common figures

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot [command]

Available Commands:
  box         plot boxplot
  hist        plot histogram
  line        line plot and scatter plot

Flags:
      --axis-width float      axis width (default 1.5)
  -f, --data-field string     column index or column name of data (default &quot;1&quot;)
      --format string         image format for stdout when flag -o/--out-file not given. available
                              values: eps, jpg|jpeg, pdf, png, svg, and tif|tiff. (default &quot;png&quot;)
  -g, --group-field string    column index or column name of group
      --height float          Figure height (default 4.5)
  -h, --help                  help for plot
      --label-size int        label font size (default 14)
      --na-values strings     NA values, case ignored (default [,NA,N/A])
      --scale float           scale the image width/height, tick, axes, line/point and font sizes
                              proportionally (default 1)
      --skip-na               skip NA values in --na-values
      --tick-label-size int   tick label font size (default 12)
      --tick-width float      axis tick width (default 1.5)
      --title string          Figure title
      --title-size int        title font size (default 16)
      --width float           Figure width (default 6)
      --x-max string          maximum value of X axis
      --x-min string          minimum value of X axis
      --xlab string           x label text
      --y-max string          maximum value of Y axis
      --y-min string          minimum value of Y axis
      --ylab string           y label text
      --x-scale-ln            scale the X axis with natural log
      --y-scale-ln            scale the Y axis with natural log

</code></pre>
<p><strong><em>Note that most of the flags of <code>plot</code> are global flags of the subcommands
<code>hist</code>, <code>box</code> and <code>line</code></em></strong></p>
<p><strong>Notes of image output</strong></p>
<ol>
<li>Output file can be set by flag -o/--out-file.</li>
<li>File format is determined by the out file suffix.
   Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff</li>
<li>If flag -o/--out-file not set (default), image is written to stdout,
   you can display the image by pipping to  <code>display</code> command of <code>Imagemagic</code>
   or just redirect to file.</li>
</ol>
<h2 id="plot-hist">plot hist</h2>
<p>Usage</p>
<pre><code class="language-text">plot histogram

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot hist [flags]

Flags:
      --bins int           number of bins (default 50)
      --color-index int    color index, 1-7 (default 1)
  -h, --help               help for hist
      --line-width float   line width (default 1)
      --percentiles        calculate percentiles

</code></pre>
<p>Examples</p>
<ul>
<li>
<p>example data</p>
<pre><code>$ zcat testdata/grouped_data.tsv.gz | head -n 5 | csvtk -t pretty
Group     Length   GC Content
Group A   97       57.73
Group A   95       49.47
Group A   97       49.48
Group A   100      51.00
</code></pre>
</li>
<li>
<p>plot histogram with data of the second column:</p>
<pre><code>$ csvtk -t plot hist testdata/grouped_data.tsv.gz -f 2 \
    --title Histogram -o histogram.png
</code></pre>
<p><img alt="histogram.png" src="../testdata/figures/histogram.png" /></p>
</li>
<li>
<p>You can also write image to stdout and pipe to "display" command of Imagemagic:</p>
<pre><code>$ csvtk -t plot hist testdata/grouped_data.tsv.gz -f 2 | display
</code></pre>
</li>
</ul>
<h2 id="plot-box">plot box</h2>
<p>Usage</p>
<pre><code class="language-text">plot boxplot

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot box [flags]

Flags:
      --box-width float    box width
      --color-index int    color index, 1-7 (default 1)
  -h, --help               help for box
      --horiz              horize box plot
      --line-width float   line width (default 1.5)
      --point-size float   point size (default 3)

</code></pre>
<p>Examples</p>
<ul>
<li>
<p>plot boxplot with data of the "GC Content" (third) column,
group information is the "Group" column.</p>
<pre><code>csvtk -t plot box testdata/grouped_data.tsv.gz -g "Group" -f "GC Content" \
    --width 3 --title "Box plot" \
    &gt; boxplot.png
</code></pre>
<p><img alt="boxplot.png" src="../testdata/figures/boxplot.png" /></p>
</li>
<li>
<p>plot horiz boxplot with data of the "Length" (second) column,
group information is the "Group" column.</p>
<pre><code>$ csvtk -t plot box testdata/grouped_data.tsv.gz -g "Group" -f "Length" \
    --height 3 --width 5 --horiz --title "Horiz box plot" \
    &gt; boxplot2.png`
</code></pre>
<p><img alt="boxplot2.png" src="../testdata/figures/boxplot2.png" /></p>
</li>
</ul>
<h2 id="plot-line">plot line</h2>
<p>Usage</p>
<pre><code class="language-text">line plot and scatter plot

Notes:

  1. Output file can be set by flag -o/--out-file.
  2. File format is determined by the out file suffix.
     Supported formats: eps, jpg|jpeg, pdf, png, svg, and tif|tiff
  3. If flag -o/--out-file not set (default), image is written to stdout,
     you can display the image by pipping to &quot;display&quot; command of Imagemagic
     or just redirect to file.

Usage:
  csvtk plot line [flags]

Flags:
      --color-index int       color index, 1-7 (default 1)
  -x, --data-field-x string   column index or column name of X for command line
  -y, --data-field-y string   column index or column name of Y for command line
  -h, --help                  help for line
      --legend-left           locate legend along the left edge of the plot
      --legend-top            locate legend along the top edge of the plot
      --line-width float      line width (default 1.5)
      --point-size float      point size (default 3)
      --scatter               only plot points

</code></pre>
<p>Examples</p>
<ul>
<li>
<p>example data</p>
<pre><code>$ head -n 5 testdata/xy.tsv
Group   X       Y
A       0       1
A       1       1.3
A       1.5     1.5
A       2.0     2
</code></pre>
</li>
<li>
<p>plot line plot with X-Y data</p>
<pre><code>$ csvtk -t plot line testdata/xy.tsv -x X -y Y -g Group \
    --title "Line plot" \
    &gt; lineplot.png
</code></pre>
<p><img alt="lineplot.png" src="../testdata/figures/lineplot.png" /></p>
</li>
<li>
<p>plot scatter</p>
<pre><code>$ csvtk -t plot line testdata/xy.tsv -x X -y Y -g Group \
    --title "Scatter" --scatter \
    &gt; lineplot.png
</code></pre>
<p><img alt="scatter.png" src="../testdata/figures/scatter.png" /></p>
</li>
</ul>
<h2 id="cat">cat</h2>
<p>Usage</p>
<pre><code class="language-text">stream file to stdout and report progress on stderr

Usage:
  csvtk cat [flags]

Flags:
  -b, --buffsize int     buffer size (default 8192)
  -h, --help             help for cat
  -L, --lines            count lines instead of bytes
  -p, --print-freq int   print frequency (-1 for print after parsing) (default 1)
  -s, --total int        expected total bytes/lines (default -1)
</code></pre>
<p>Examples</p>
<ol>
<li>
<p>Stream file, report progress in bytes</p>
<pre><code>csvtk cat file.tsv
</code></pre>
</li>
<li>
<p>Stream file from stdin, report progress in lines</p>
<pre><code>tac input.tsv | csvtk cat -L -s `wc -l &lt; input.tsv` -
</code></pre>
</li>
</ol>
<h2 id="genautocomplete">genautocomplete</h2>
<p>Usage</p>
<pre><code class="language-text">generate shell autocompletion script

Supported shell: bash|zsh|fish|powershell

Bash:

    # generate completion shell
    csvtk genautocomplete --shell bash

    # configure if never did.
    # install bash-completion if the &quot;complete&quot; command is not found.
    echo &quot;for bcfile in ~/.bash_completion.d/* ; do source \$bcfile; done&quot; &gt;&gt; ~/.bash_completion
    echo &quot;source ~/.bash_completion&quot; &gt;&gt; ~/.bashrc

Zsh:

    # generate completion shell
    csvtk genautocomplete --shell zsh --file ~/.zfunc/_csvtk

    # configure if never did
    echo 'fpath=( ~/.zfunc &quot;${fpath[@]}&quot; )' &gt;&gt; ~/.zshrc
    echo &quot;autoload -U compinit; compinit&quot; &gt;&gt; ~/.zshrc

fish:

    csvtk genautocomplete --shell fish --file ~/.config/fish/completions/csvtk.fish

Usage:
  csvtk genautocomplete [flags]

Flags:
      --file string    autocompletion file (default &quot;/home/shenwei/.bash_completion.d/csvtk.sh&quot;)
  -h, --help           help for genautocomplete
      --shell string   autocompletion type (bash|zsh|fish|powershell) (default &quot;bash&quot;)

</code></pre>
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//csvtk.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  </body>
</html>